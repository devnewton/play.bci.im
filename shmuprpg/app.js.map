{"version":3,"sources":["app/ShmuprpgApp.ts","app/ShmuprpgGame.ts","app/entities/Bird.ts","app/entities/BirdFlock.ts","app/entities/Bullet.ts","app/entities/Bunny.ts","app/entities/CircularGun.ts","app/entities/Grobelin.ts","app/entities/GrobelinHorde.ts","app/entities/Hero.ts","app/entities/MachineGun.ts","app/entities/Spider.ts","app/entities/SpiderHorde.ts","app/ia/decisions/b3.ts","app/ia/services/Pathfinder.ts","app/states/AbstractState.ts","app/states/DemoEnding.ts","app/states/GameOver.ts","app/states/GamepadOptions.ts","app/states/GamepadOptionsBindAxis.ts","app/states/GamepadOptionsLayout.ts","app/states/Help.ts","app/states/Intro.ts","app/states/KeyboardOptions.ts","app/states/KeyboardOptionsBindKey.ts","app/states/Level.ts","app/states/Options.ts","app/states/Title.ts","app/ui/Dialog.ts","app/ui/MenuButton.ts","app/utils/Controls.ts","app/utils/DamageResolver.ts"],"names":[],"mappings":"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","file":"public/app.js","sourcesContent":["import { ShmuprpgGame } from \"./ShmuprpgGame\";\n\nnew ShmuprpgGame();","/// <reference path=\"../typings/phaser.d.ts\"/>\nimport {Intro} from \"./states/Intro\";\nimport {Title} from \"./states/Title\";\nimport {DemoEnding} from \"./states/DemoEnding\";\nimport {Help} from \"./states/Help\";\nimport {Options} from \"./states/Options\";\nimport {KeyboardOptions} from \"./states/KeyboardOptions\";\nimport {KeyboardOptionsBindKey} from \"./states/KeyboardOptionsBindKey\";\nimport {GamepadOptions} from \"./states/GamepadOptions\";\nimport {GamepadOptionsLayout} from \"./states/GamepadOptionsLayout\";\nimport {GamepadOptionsBindAxis} from \"./states/GamepadOptionsBindAxis\";\nimport {Level} from \"./states/Level\";\nimport {GameOver} from \"./states/GameOver\";\nimport {Controls} from \"./utils/Controls\";\n\nexport class ShmuprpgGame extends Phaser.Game {\n\n    controls: Controls;\n\n    constructor() {\n        super(1920, 1080, Phaser.CANVAS, 'game', {\n            preload: () => this.preloadGame()\n            , create: () => this.createGame()\n        });\n        this.state.add('Intro', Intro);\n        this.state.add('Title', Title);\n        this.state.add('Help', Help);\n        this.state.add('Options', Options);\n        this.state.add('GamepadOptionsLayout', GamepadOptionsLayout);\n        this.state.add('GamepadOptionsBindAxis', GamepadOptionsBindAxis);\n        this.state.add('KeyboardOptions', KeyboardOptions);\n        this.state.add('KeyboardOptionsBindKey', KeyboardOptionsBindKey);\n        this.state.add('GamepadOptions', GamepadOptions);\n        this.state.add('Level', Level);\n        this.state.add('GameOver', GameOver);\n        this.state.add('DemoEnding', DemoEnding);\n    }\n\n    preloadGame() {\n        this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n        this.scale.fullScreenScaleMode = Phaser.ScaleManager.SHOW_ALL;\n        this.scale.pageAlignHorizontally = true;\n        this.scale.pageAlignVertically = true;\n    }\n\n    createGame() {\n        this.controls = new Controls(this);\n        this.state.start('Title');\n    }\n\n    addSpriteAnimation(sprite: Phaser.Sprite, animationName: string, frameCount: number): Phaser.Animation {\n        return sprite.animations.add(animationName, this.genAnimArray(animationName, frameCount));\n    }\n\n    private genAnimArray(name: string, n: number) {\n        let result = new Array<string>();\n        for (let i = 0; i < n; ++i) {\n            result.push(name + i);\n        }\n        return result;\n    }\n\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\n\nexport class Bird extends Phaser.Sprite {\n\n    birdExplosion: Phaser.Sprite;\n\n    constructor(game: Phaser.Game) {\n        super(game, 0, 0, 'bird');\n        this.animations.add('fly');\n        this.game.physics.enable(this, Phaser.Physics.ARCADE);\n        this.anchor.setTo(0.5, 0.5);\n        this.checkWorldBounds = true;\n        this.outOfBoundsKill = true;\n        this.exists = false;\n        this.birdExplosion = this.game.add.sprite(this.x, this.y, 'bird-explosion');\n        this.birdExplosion.anchor.setTo(0.5, 0.5);\n        this.birdExplosion.exists = false;\n        const explodeAnimation = this.birdExplosion.animations.add('explode');\n        explodeAnimation.killOnComplete = true;\n    }\n\n    fly(fromX: number, fromY: number, angle: number) {\n        const beforeBird = this.game.add.sprite(fromX, fromY, 'before-bird');\n        beforeBird.anchor.setTo(0.5, 0.5);\n        const beforeBirdAnimation = beforeBird.animations.add('appears');\n        beforeBirdAnimation.onComplete.add(() => {\n            beforeBird.destroy();\n            this.reset(fromX, fromY, 1);\n            this.play('fly', 8, true);\n            this.game.physics.arcade.velocityFromRotation(angle, 300, this.body.velocity);\n            this.scale.set(this.body.velocity.x < 0 ? -1 : 1, 1);\n        });\n        beforeBirdAnimation.play(4, false);\n    }\n\n    kill(): Phaser.Sprite {\n        super.kill();\n        this.birdExplosion.reset(this.x, this.y);\n        this.birdExplosion.play('explode', 8, false);\n        return this;\n    }\n    \n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {Bird} from \"./Bird\";\n\nexport class BirdFlock extends Phaser.Group {\n\n    flyRate = 1000;\n    target: Phaser.Sprite;\n    private nextFlyTime = 0;\n\n    constructor(target: Phaser.Sprite, maxBirds: number = 10) {\n        super(target.game);\n        this.reset(target, maxBirds);\n    }\n\n    reset(target: Phaser.Sprite, maxBirds: number = 10) {\n        this.target = target;\n        this.removeAll();\n        for (let i = 0; i < maxBirds; ++i) {\n            this.add(this.createBird());\n        }\n    }\n\n    static preload(game: Phaser.Game) {\n        game.load.spritesheet('bird', 'sprites/oga/tower-defense-prototyping-assets-4-monsters-some-tiles-a-background-image/bird.png', 48, 48, 5);\n        game.load.spritesheet('before-bird', 'sprites/oga/rpg-special-move-effects/VioletSlash.png', 64, 64, 4);\n        game.load.spritesheet('bird-explosion', 'sprites/oga/space_shooter_pack/explosion.png', 16, 16, 5);\n    }\n\n    update() {\n        super.update();\n        const x = this.game.world.randomX;\n        const y = this.game.world.randomY;\n        const angle = Phaser.Math.angleBetween(x, y, this.target.x, this.target.y);\n        this.fly(x, y, angle);\n    }\n\n    private createBird(): Bird {\n        return new Bird(this.game);\n    }\n\n    private fly(fromX: number, fromY: number, angle: number) {\n        if (this.game.time.time >= this.nextFlyTime) {\n            const bird = this.getFirstExists(false);\n            if (bird) {\n                bird.fly(fromX, fromY, angle);\n                this.nextFlyTime = this.game.time.time + this.flyRate;\n            }\n        }\n    }\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport { ShmuprpgGame } from \"../ShmuprpgGame\";\n\nexport class Bullet extends Phaser.Sprite {\n\n    bulletAnimation: string;\n\n    constructor(game: Phaser.Game, animation = 'bullet.red', atlas = 'bullets') {\n        super(game, 0, 0, atlas);\n        this.bulletAnimation = animation;\n        (<ShmuprpgGame>game).addSpriteAnimation(this, this.bulletAnimation, 4);\n        this.game.physics.enable(this, Phaser.Physics.ARCADE);\n        this.anchor.setTo(0.5, 0.5);\n        this.checkWorldBounds = true;\n        this.outOfBoundsKill = true;\n        this.exists = false;\n        this.health = 0;\n        this.alive = false;\n    }\n\n    fire(fromX: number, fromY: number, angle: number, speed: number, gravityX: number, gravityY: number) {\n        this.reset(fromX, fromY, 1);\n        this.scale.set(1);\n        this.game.physics.arcade.velocityFromRotation(angle, speed, this.body.velocity);\n        this.angle = angle;\n        this.body.gravity.set(gravityX, gravityY);\n        this.play(this.bulletAnimation, 4, true);\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {ShmuprpgGame} from \"../ShmuprpgGame\";\nimport {CircularGun} from \"./CircularGun\";\nimport {Pathfinder} from \"../ia/services/Pathfinder\";\nimport * as b3 from \"../ia/decisions/b3\";\n\nexport class Bunny extends Phaser.Sprite {\n\n    birdExplosion: Phaser.Sprite;\n    pathfinder: Pathfinder;\n    blackboard: BunnyBlackboard;\n    weapon: CircularGun;\n    private damageTween: Phaser.Tween;\n\n    constructor(game: Phaser.Game, pathfinder: Pathfinder) {\n        super(game, 0, 0, 'bunny');\n        this.pathfinder = pathfinder;\n        this.game.physics.enable(this, Phaser.Physics.ARCADE);\n        this.anchor.setTo(0.5, 0.5);\n        this.checkWorldBounds = true;\n        this.outOfBoundsKill = true;\n        this.exists = false;\n        (<ShmuprpgGame>this.game).addSpriteAnimation(this, 'bunny.walk.front', 7);\n        (<ShmuprpgGame>this.game).addSpriteAnimation(this, 'bunny.walk.back', 7);\n        (<ShmuprpgGame>this.game).addSpriteAnimation(this, 'bunny.walk.right', 7);\n        (<ShmuprpgGame>this.game).addSpriteAnimation(this, 'bunny.walk.left', 7);\n        (<ShmuprpgGame>this.game).addSpriteAnimation(this, 'bunny.stand.front', 1);\n        (<ShmuprpgGame>this.game).addSpriteAnimation(this, 'bunny.stand.back', 1);\n        (<ShmuprpgGame>this.game).addSpriteAnimation(this, 'bunny.stand.right', 1);\n        (<ShmuprpgGame>this.game).addSpriteAnimation(this, 'bunny.stand.left', 1);\n        this.birdExplosion = this.game.add.sprite(this.x, this.y, 'bird-explosion');\n        this.birdExplosion.anchor.setTo(0.5, 0.5);\n        this.birdExplosion.exists = false;\n        const explodeAnimation = this.birdExplosion.animations.add('explode');\n        explodeAnimation.killOnComplete = true;\n        this.weapon = new CircularGun(this.game);\n    }\n\n    static preload(game: Phaser.Game) {\n        game.load.atlasXML('bunny', 'sprites/lpc/bunny/bunny.png', 'sprites/lpc/bunny/bunny.xml');\n    }\n\n    appears(fromX: number, fromY: number) {\n        const beforeBunny = this.game.add.sprite(fromX, fromY, 'before-bird');\n        beforeBunny.anchor.setTo(0.5, 0.5);\n        const beforeBunnyAnimation = beforeBunny.animations.add('appears');\n        beforeBunnyAnimation.onComplete.add(() => {\n            beforeBunny.destroy();\n            this.reset(fromX, fromY, 10);\n            this.blackboard = new BunnyBlackboard();\n        });\n        beforeBunnyAnimation.play(4, false);\n    }\n\n    update() {\n        super.update();\n        if (this.exists) {\n            this.executeBehaviorTree();\n        }\n    }\n\n    private executeBehaviorTree() {\n        BunnyB3.get().tick(this, this.blackboard);\n    }\n\n    damage(amount: number): Phaser.Sprite {\n        super.damage(amount);\n        if (!this.damageTween) {\n            this.damageTween = this.game.add.tween(this).from({ tint: 0xFF0000 }).to({ tint: 0xFFFFFF }, 500, Phaser.Easing.Linear.None, true, 0, 4, false);\n            this.damageTween.onComplete.add((): void => this.damageTween = null);\n        }\n        this.blackboard.fearLevel = 60;\n        return this;\n    }\n\n    kill(): Phaser.Sprite {\n        super.kill();\n        if(this.damageTween) {\n            this.damageTween.stop(true);\n        }\n        this.birdExplosion.reset(this.x, this.y);\n        this.birdExplosion.play('explode', 8, false);\n        return this;\n    }\n}\n\nclass BunnyBlackboard extends b3.Blackboard {\n    currentPathPointTarget: Phaser.Point;\n    path: Array<Phaser.Point>;\n    fearLevel = 60;\n}\n\nclass BunnyB3 extends b3.Tree<Bunny, BunnyBlackboard> {\n\n    private static singleton: BunnyB3;\n    static get() {\n        return this.singleton || (this.singleton = new BunnyB3());\n    }\n\n    constructor() {\n        super();\n        this.root = this.selector(\n            new ActionFollowPath(),\n            this.sequence(new ConditionFeelSafe(), new ActionAttack()),\n            new ActionSearchAPath());\n    }\n}\n\n\nclass ActionFollowPath extends b3.Action<Bunny, BunnyBlackboard> {\n    tick(t: b3.Tick<Bunny, BunnyBlackboard>): b3.NodeState {\n        let me = t.me;\n        let currentPathPointTarget = t.blackboard.currentPathPointTarget;\n        if (currentPathPointTarget) {\n            this.moveToXY(me, currentPathPointTarget.x, currentPathPointTarget.y, 300);\n            if (Phaser.Math.distance(me.body.center.x, me.body.center.y, currentPathPointTarget.x, currentPathPointTarget.y) < me.body.halfWidth) {\n                t.blackboard.currentPathPointTarget = null;\n            }\n        } else {\n            let path = t.blackboard.path || [];\n            t.blackboard.currentPathPointTarget = path.shift();\n            if (path.length == 0) {\n                me.body.velocity.x = 0;\n                me.body.velocity.y = 0;\n                return b3.NodeState.FAILURE;\n            }\n        }\n        this.animate(me);\n        return b3.NodeState.RUNNING;\n    }\n\n    animate(me: Bunny) {\n        if (Math.abs(me.body.velocity.x) > Math.abs(me.body.velocity.y)) {\n            if (me.body.velocity.x < 0) {\n                me.play(\"bunny.walk.left\", 8, false);\n            } else if (me.body.velocity.x > 0) {\n                me.play(\"bunny.walk.right\", 8, false);\n            } else if (me.body.velocity.y < 0) {\n                me.play(\"bunny.walk.back\", 8, false);\n            } else if (me.body.velocity.y > 0) {\n                me.play(\"bunny.walk.front\", 8, false);\n            } else {\n                me.play(\"bunny.stand.front\", 0, false);\n            }\n        } else {\n            if (me.body.velocity.y < 0) {\n                me.play(\"bunny.walk.back\", 8, false);\n            } else if (me.body.velocity.y > 0) {\n                me.play(\"bunny.walk.front\", 8, false);\n            } else if (me.body.velocity.x < 0) {\n                me.play(\"bunny.walk.left\", 8, false);\n            } else if (me.body.velocity.x > 0) {\n                me.play(\"bunny.walk.right\", 8, false);\n            } else {\n                me.play(\"bunny.stand.front\", 0, false);\n            }\n        }\n    }\n\n    moveToXY(me: Bunny, x: number, y: number, speed: number = 60) {\n        var angle = Math.atan2(y - me.body.center.y, x - me.body.center.x);\n        me.body.velocity.x = Math.cos(angle) * speed;\n        me.body.velocity.y = Math.sin(angle) * speed;\n    }\n}\n\nclass ActionSearchAPath extends b3.Action<Bunny, BunnyBlackboard> {\n\n    thinking = new b3.BlackboardKey<boolean>();\n\n    tick(t: b3.Tick<Bunny, BunnyBlackboard>): b3.NodeState {\n        let thinking = t.blackboard.get(this.thinking) || false;\n        let me = t.me;\n        if (!thinking) {\n            t.blackboard.set(this.thinking, true);\n            let targetPos = me.pathfinder.randomWalkablePos();\n            me.pathfinder.findPath(me.body.center.x, me.body.center.y, targetPos.x, targetPos.y, (path: Phaser.Point[]) => {\n                t.blackboard.path = path || [];\n                t.blackboard.set(this.thinking, false);\n            });\n        }\n        let path = t.blackboard.path || [];\n        return path.length > 0 ? b3.NodeState.SUCCESS : b3.NodeState.RUNNING;\n    }\n}\n\nclass ConditionFeelSafe extends b3.Action<Bunny, BunnyBlackboard>  {\n    tick(t: b3.Tick<Bunny, BunnyBlackboard>): b3.NodeState {\n        let fearLevel = t.blackboard.fearLevel > 0 ? t.blackboard.fearLevel-- : 0;\n        if (fearLevel == 0) {\n            return b3.NodeState.SUCCESS;\n        }\n        if (fearLevel == 60) {\n            return b3.NodeState.FAILURE;\n        }\n        return b3.NodeState.RUNNING;\n    }\n}\n\nclass ActionAttack extends b3.Action<Bunny, BunnyBlackboard> {\n    tick(t: b3.Tick<Bunny, BunnyBlackboard>): b3.NodeState {\n        t.me.weapon.fire(t.me.centerX, t.me.centerY);\n        return b3.NodeState.RUNNING;\n    }\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {Bullet} from \"./Bullet\";\n\nexport class CircularGun extends Phaser.Group {\n\n    bulletSpeed = 300;\n    fireRate = 800;\n    nextFireTime = 0;\n    bulletsByShots: number;\n\n    constructor(game: Phaser.Game, maxBullets: number = 64, bulletsByShots = 8) {\n        super(game);\n        this.bulletsByShots = bulletsByShots;\n        for (let i = 0; i < maxBullets; ++i) {\n            this.add(this.createBullet());\n        }\n    }\n\n    createBullet(): Bullet {\n        return new Bullet(this.game);\n    }\n\n    fire(fromX: number, fromY: number) {\n        if (this.game.time.time >= this.nextFireTime) {\n            for (let b = 1; b <= this.bulletsByShots; ++b) {\n                const bullet = <Bullet>this.getFirstExists(false);\n                if (bullet) {\n                    bullet.fire(fromX, fromY, b * 2 * Math.PI / this.bulletsByShots, this.bulletSpeed, 0, 0);\n                }\n            }\n            this.nextFireTime = this.game.time.time + this.fireRate;\n        }\n    }\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {Level} from \"../states/Level\";\nimport {Pathfinder} from \"../ia/services/Pathfinder\";\nimport * as b3 from \"../ia/decisions/b3\";\n\nexport class Grobelin extends Phaser.Sprite {\n\n    grobelinDeath: Phaser.Sprite;\n    enemy: Phaser.Sprite;\n    pathfinder: Pathfinder;\n    private attackAnimation: Phaser.Animation;\n    private attackDangerousOffset: Phaser.Point;\n    private damageTween: Phaser.Tween;\n    private blackboard: GrobelinBlackboard;\n\n    constructor(game: Phaser.Game, pathfinder: Pathfinder) {\n        super(game, 0, 0, 'grobelin');\n        this.exists = false;\n        this.pathfinder = pathfinder;\n        this.game.physics.enable(this, Phaser.Physics.ARCADE);\n        this.anchor.setTo(0.5, 0.5);\n        this.checkWorldBounds = true;\n        this.outOfBoundsKill = true;\n        this.grobelinDeath = this.game.add.sprite(this.x, this.y, 'grobelin');\n        this.grobelinDeath.anchor.setTo(0.5, 0.5);\n        this.grobelinDeath.exists = false;\n    }\n\n    appears(fromX: number, fromY: number, target: Phaser.Sprite) {\n        const beforeGrobelin = this.game.add.sprite(fromX, fromY, 'before-bird');\n        beforeGrobelin.anchor.setTo(0.5, 0.5);\n        const beforeGrobelinAnimation = beforeGrobelin.animations.add('appears');\n        beforeGrobelinAnimation.onComplete.add(() => {\n            beforeGrobelin.destroy();\n            this.reset(fromX, fromY, 20);\n            this.body.setSize(16, 16, 24, 48);\n            this.body.collideWorldBounds = true;\n            this.blackboard = new GrobelinBlackboard();\n            this.enemy = target;\n        });\n        beforeGrobelinAnimation.play(4, false);\n    }\n\n    kill(): Phaser.Sprite {\n        super.kill();\n        if (this.damageTween) {\n            this.damageTween.stop(true);\n        }\n        this.tint = 0xFFFFFF;\n        this.grobelinDeath.reset(this.x, this.y);\n        this.grobelinDeath.animations.play(\"lpc.hurt\", 6, false).killOnComplete = true;\n        return this;\n    }\n\n    update() {\n        super.update();\n        if (this.exists) {\n            this.executeBehaviorTree();\n        }\n    }\n\n    damage(amount: number): Phaser.Sprite {\n        if (!this.damageTween) {\n            this.damageTween = this.game.add.tween(this).from({ tint: 0xFF0000 }).to({ tint: 0xFFFFFF }, 500, Phaser.Easing.Linear.None, true, 0, 4, false);\n            this.damageTween.onComplete.add((): void => this.damageTween = null);\n        }\n        super.damage(amount);\n        return this;\n    }\n\n    private executeBehaviorTree() {\n        GrobelinB3.get().tick(this, this.blackboard);\n    }\n\n    attackEnemy(): boolean {\n        this.body.velocity.x = 0;\n        this.body.velocity.y = 0;\n        if (!this.attackAnimation) {\n            [this.attackAnimation, this.attackDangerousOffset] = this.playAttackEnemyAnimation();\n        } else if (this.attackAnimation.isFinished) {\n            this.attackAnimation = null;\n            const enemyRectangle = new Phaser.Rectangle(this.enemy.left, this.enemy.top, this.enemy.width, this.enemy.height);\n            if (Phaser.Rectangle.containsPoint(enemyRectangle, this.getAttackPoint())) {\n                this.enemy.damage(1);\n            }\n        }\n        return true;\n    }\n\n    getAttackPoint(): Phaser.Point {\n        if (this.attackDangerousOffset) {\n            return new Phaser.Point(this.body.center.x + this.attackDangerousOffset.x, this.body.center.y + this.attackDangerousOffset.y);\n        } else {\n            return null;\n        }\n    }\n\n    private playAttackEnemyAnimation(): [Phaser.Animation, Phaser.Point] {\n        const dx = this.enemy.body.center.x - this.body.center.x;\n        const dy = this.enemy.body.center.y - this.body.center.y;\n        if (Math.abs(dx) > Math.abs(dy)) {\n            if (dx < 0) {\n                return [this.play(\"lpc.thrust.left\", 8, false), new Phaser.Point(-24, -16)];\n            } else if (dx > 0) {\n                return [this.play(\"lpc.thrust.right\", 8, false), new Phaser.Point(24, -16)];\n            } else if (dy < 0) {\n                return [this.play(\"lpc.thrust.back\", 8, false), new Phaser.Point(8, -48)];\n            } else if (dy > 0) {\n                return [this.play(\"lpc.thrust.front\", 8, false), new Phaser.Point(-8, 8)];\n            } else {\n                return [this.play(\"lpc.thrust.right\", 8, false), new Phaser.Point(24, -16)];\n            }\n        } else {\n            if (dy < 0) {\n                return [this.play(\"lpc.thrust.back\", 8, false), new Phaser.Point(8, -48)];\n            } else if (dy > 0) {\n                return [this.play(\"lpc.thrust.front\", 8, false), new Phaser.Point(-8, 8)];\n            } else if (dx < 0) {\n                return [this.play(\"lpc.thrust.left\", 8, false), new Phaser.Point(-24, -16)];\n            } else if (dx > 0) {\n                return [this.play(\"lpc.thrust.right\", 8, false), new Phaser.Point(24, -16)];\n            } else {\n                return [this.play(\"lpc.thrust.back\", 8, false), new Phaser.Point(8, -48)];\n            }\n        }\n    }\n}\n\nclass GrobelinBlackboard extends b3.Blackboard {\n    currentPathPointTarget: Phaser.Point;\n    path: Array<Phaser.Point>;\n}\n\nclass GrobelinB3 extends b3.Tree<Grobelin, GrobelinBlackboard> {\n\n    private static singleton: GrobelinB3;\n    static get() {\n        return this.singleton || (this.singleton = new GrobelinB3());\n    }\n\n    constructor() {\n        super();\n        this.root = this.selector(\n            this.sequence(new ConditionIsNearEnemy(), new ActionAttackEnemy()),\n            new ActionFollowPath(),\n            new ActionSearchAPathToEnemy());\n    }\n}\n\nclass ActionFollowPath extends b3.Action<Grobelin, GrobelinBlackboard> {\n    tick(t: b3.Tick<Grobelin, GrobelinBlackboard>): b3.NodeState {\n        let me = t.me;\n        let currentPathPointTarget = t.blackboard.currentPathPointTarget;\n        if (currentPathPointTarget) {\n            this.moveToXY(me, currentPathPointTarget.x, currentPathPointTarget.y, 300);\n            if (Phaser.Math.distance(me.body.center.x, me.body.center.y, currentPathPointTarget.x, currentPathPointTarget.y) < me.body.halfWidth) {\n                t.blackboard.currentPathPointTarget = null;\n            }\n        } else {\n            let path = t.blackboard.path || [];\n            t.blackboard.currentPathPointTarget = path.shift();\n            if (path.length == 0) {\n                me.body.velocity.x = 0;\n                me.body.velocity.y = 0;\n                return b3.NodeState.FAILURE;\n            }\n        }\n        this.animate(me);\n        return b3.NodeState.RUNNING;\n    }\n\n    animate(me: Grobelin) {\n        if (Math.abs(me.body.velocity.x) > Math.abs(me.body.velocity.y)) {\n            if (me.body.velocity.x < 0) {\n                me.play(\"lpc.walk.left\", 8, false);\n            } else if (me.body.velocity.x > 0) {\n                me.play(\"lpc.walk.right\", 8, false);\n            } else if (me.body.velocity.y < 0) {\n                me.play(\"lpc.walk.back\", 8, false);\n            } else if (me.body.velocity.y > 0) {\n                me.play(\"lpc.walk.front\", 8, false);\n            } else {\n                me.play(\"lpc.hurt\", 0, false);\n            }\n        } else {\n            if (me.body.velocity.y < 0) {\n                me.play(\"lpc.walk.back\", 8, false);\n            } else if (me.body.velocity.y > 0) {\n                me.play(\"lpc.walk.front\", 8, false);\n            } else if (me.body.velocity.x < 0) {\n                me.play(\"lpc.walk.left\", 8, false);\n            } else if (me.body.velocity.x > 0) {\n                me.play(\"lpc.walk.right\", 8, false);\n            } else {\n                me.play(\"lpc.hurt\", 0, false);\n            }\n        }\n    }\n\n    moveToXY(me: Grobelin, x: number, y: number, speed: number = 60) {\n        var angle = Math.atan2(y - me.body.center.y, x - me.body.center.x);\n        me.body.velocity.x = Math.cos(angle) * speed;\n        me.body.velocity.y = Math.sin(angle) * speed;\n    }\n}\n\nclass ActionSearchAPathToEnemy extends b3.Action<Grobelin, GrobelinBlackboard> {\n\n    thinking = new b3.BlackboardKey<boolean>();\n\n    tick(t: b3.Tick<Grobelin, GrobelinBlackboard>): b3.NodeState {\n        let thinking = t.blackboard.get(this.thinking) || false;\n        let me = t.me;\n        if (!thinking) {\n            t.blackboard.set(this.thinking, true);\n            me.pathfinder.findPath(me.body.center.x, me.body.center.y, me.enemy.body.center.x, me.enemy.body.center.y, (path: Phaser.Point[]) => {\n                t.blackboard.path = path || [];\n                t.blackboard.set(this.thinking, false);\n            });\n        }\n        let path = t.blackboard.path || [];\n        return path.length > 0 ? b3.NodeState.SUCCESS : b3.NodeState.RUNNING;\n    }\n}\n\nclass ConditionIsNearEnemy extends b3.Condition<Grobelin, GrobelinBlackboard> {\n    check(t: b3.Tick<Grobelin, GrobelinBlackboard>): boolean {\n        let me = t.me;\n        return me.enemy && Phaser.Math.distance(me.body.center.x, me.body.center.y, me.enemy.body.center.x, me.enemy.body.center.y) < me.body.width * 2;\n    }\n}\n\nclass ActionAttackEnemy extends b3.Action<Grobelin, GrobelinBlackboard> {\n    tick(t: b3.Tick<Grobelin, GrobelinBlackboard>): b3.NodeState {\n        if (t.me.attackEnemy()) {\n            return b3.NodeState.SUCCESS;\n        } else {\n            return b3.NodeState.RUNNING;\n        }\n    }\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {Grobelin} from \"./Grobelin\";\nimport { ShmuprpgGame } from \"../ShmuprpgGame\";\nimport { Level } from \"../states/Level\";\nimport { Pathfinder } from \"../ia/services/Pathfinder\";\n\nexport class GrobelinHorde extends Phaser.Group {\n\n    appearsRate = 10000;\n    target: Phaser.Sprite;\n    private nextAppearsTime = 0;\n    private pathfinder: Pathfinder;\n\n    constructor(target: Phaser.Sprite, pathFinder: Pathfinder, maxGrobelins: number = 4) {\n        super(target.game);\n        this.pathfinder = pathFinder;\n        this.reset(target, maxGrobelins);\n    }\n\n    reset(target: Phaser.Sprite, maxGrobelins: number = 4) {\n        this.target = target;\n        this.removeAll();\n        for (let i = 0; i < maxGrobelins; ++i) {\n            this.add(this.createGrobelin());\n        }\n    }\n\n    static preload(game: Phaser.Game) {\n        game.load.atlasXML('grobelin', 'sprites/lpc/characters/grobelin.png', 'sprites/lpc/characters/lpc.xml');\n    }\n\n    update() {\n        super.update();\n        this.appears();\n    }\n\n    private createGrobelin(): Grobelin {\n        const grobelin = new Grobelin(this.game, this.pathfinder);\n        const game = <ShmuprpgGame>this.game;\n        game.addSpriteAnimation(grobelin.grobelinDeath, 'lpc.hurt', 6);\n        game.addSpriteAnimation(grobelin, 'lpc.hurt', 6);\n        game.addSpriteAnimation(grobelin, 'lpc.walk.back', 9);\n        game.addSpriteAnimation(grobelin, 'lpc.walk.front', 9);\n        game.addSpriteAnimation(grobelin, 'lpc.walk.left', 9);\n        game.addSpriteAnimation(grobelin, 'lpc.walk.right', 9);\n        game.addSpriteAnimation(grobelin, 'lpc.thrust.back', 9);\n        game.addSpriteAnimation(grobelin, 'lpc.thrust.front', 9);\n        game.addSpriteAnimation(grobelin, 'lpc.thrust.left', 9);\n        game.addSpriteAnimation(grobelin, 'lpc.thrust.right', 9);\n        return grobelin;\n    }\n\n    private appears() {\n        if (this.game.time.time >= this.nextAppearsTime) {\n            const grobelin = <Grobelin>this.getFirstExists(false);\n            if (grobelin) {\n                const pos = this.pathfinder.randomWalkablePos();\n                grobelin.appears(pos.x, pos.y, this.target);\n                this.nextAppearsTime = this.game.time.time + this.appearsRate;\n            }\n        }\n    }\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport { ShmuprpgGame } from \"../ShmuprpgGame\";\nimport { CircularGun } from \"./MachineGun\";\nimport { Controls } from \"../utils/Controls\";\nimport {Bullet} from \"./Bullet\";\n\nexport class Hero extends Phaser.Sprite {\n\n    weapon: HeroMachineGun;\n    controls: Controls;\n\n    constructor(game: Phaser.Game) {\n        super(game, game.world.centerX, game.world.centerY, 'tobira');\n        this.health = 3;\n        this.controls = (<ShmuprpgGame>game).controls;\n        (<ShmuprpgGame>game).addSpriteAnimation(this, 'lpc.hurt', 6);\n        (<ShmuprpgGame>game).addSpriteAnimation(this, 'lpc.walk.back', 9);\n        (<ShmuprpgGame>game).addSpriteAnimation(this, 'lpc.walk.front', 9);\n        (<ShmuprpgGame>game).addSpriteAnimation(this, 'lpc.walk.left', 9);\n        (<ShmuprpgGame>game).addSpriteAnimation(this, 'lpc.walk.right', 9);\n        this.play(\"lpc.hurt\", 0, false);\n        this.anchor.setTo(0.5, 0.5);\n        this.game.physics.enable(this, Phaser.Physics.ARCADE);\n        this.body.setSize(16, 16, 24, 48);\n        this.body.collideWorldBounds = true;\n        this.weapon = new HeroMachineGun(this.game);\n        this.game.add.existing(this.weapon);\n    }\n\n    static preload(game: Phaser.Game) {\n        game.load.atlasXML('tobira', 'sprites/lpc/characters/tobira.png', 'sprites/lpc/characters/lpc.xml');\n        game.load.atlasXML('bullets', 'sprites/devnewton/bullets.png', 'sprites/devnewton/bullets.xml');\n    }\n\n    update() {\n        super.update();\n        this.body.velocity.x = 0;\n        this.body.velocity.y = 0;\n\n        if (this.controls.isGoingLeft()) {\n            this.body.velocity.x = -300;\n        } else if (this.controls.isGoingRight()) {\n            this.body.velocity.x = 300;\n        }\n\n        if (this.controls.isGoingUp()) {\n            this.body.velocity.y = -300;\n        } else if (this.controls.isGoingDown()) {\n            this.body.velocity.y = 300;\n        }\n\n        if (this.body.velocity.y < 0) {\n            this.play(\"lpc.walk.back\", 8, false);\n        } else if (this.body.velocity.y > 0) {\n            this.play(\"lpc.walk.front\", 8, false);\n        } else if (this.body.velocity.x < 0) {\n            this.play(\"lpc.walk.left\", 8, false);\n        } else if (this.body.velocity.x > 0) {\n            this.play(\"lpc.walk.right\", 8, false);\n        } else {\n            this.play(\"lpc.hurt\", 0, false);\n        }\n\n        const shootingAngle = this.controls.shootingAngle(this.x, this.y);\n        if (shootingAngle != null) {\n            this.weapon.fire(this.x, this.y, shootingAngle);\n        }\n\n    }\n\n    invincible = false;\n\n    damage(amount: number): Phaser.Sprite {\n        if (!this.invincible) {\n            this.invincible = true;\n            this.game.add.tween(this).from({ tint: 0xFF0000 }).to({ tint: 0xFFFFFF }, 1000, Phaser.Easing.Linear.None, true, 0, 4, false).onComplete.add(() => this.invincible = false);\n            super.damage(amount);\n            if (!this.alive) {\n                this.game.state.start('GameOver')\n            }\n        }\n        return this;\n    }\n}\n\nclass HeroMachineGun extends CircularGun {\n    createBullet(): Bullet {\n        return new Bullet(this.game, 'bullet.blue');\n    }\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {Bullet} from \"./Bullet\";\n\nexport class CircularGun extends Phaser.Group {\n\n    bulletSpeed = 600;\n    fireRate = 200;\n    nextFireTime = 0;\n\n    constructor(game: Phaser.Game, maxBullets: number = 64) {\n        super(game);\n        for (let i = 0; i < maxBullets; ++i) {\n            this.add(this.createBullet());\n        }\n    }\n\n    createBullet(): Bullet {\n        return new Bullet(this.game);\n    }\n\n    fire(fromX: number, fromY: number, angle: number) {\n        if (this.game.time.time >= this.nextFireTime) {\n            const bullet = <Bullet>this.getFirstExists(false);\n            if (bullet) {\n                bullet.fire(fromX, fromY, angle, this.bulletSpeed, 0, 0);\n                this.nextFireTime = this.game.time.time + this.fireRate;\n            }\n        }\n    }\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {Level} from \"../states/Level\";\nimport {Pathfinder} from \"../ia/services/Pathfinder\";\nimport * as b3 from \"../ia/decisions/b3\";\nimport {CircularGun} from \"./MachineGun\";\n\nexport class Spider extends Phaser.Sprite {\n\n    spiderDeath: Phaser.Sprite;\n    enemy: Phaser.Sprite;\n    pathfinder: Pathfinder;\n    private attackAnimation: Phaser.Animation;\n    private attackDangerousOffset: Phaser.Point;\n    private damageTween: Phaser.Tween;\n    private blackboard: SpiderBlackboard;\n    machineGun: CircularGun;\n\n    constructor(game: Phaser.Game, pathfinder: Pathfinder) {\n        super(game, 0, 0, 'spider');\n        this.exists = false;\n        this.pathfinder = pathfinder;\n        this.game.physics.enable(this, Phaser.Physics.ARCADE);\n        this.anchor.setTo(0.5, 0.5);\n        this.checkWorldBounds = true;\n        this.outOfBoundsKill = true;\n        this.spiderDeath = this.game.add.sprite(this.x, this.y, 'spider');\n        this.spiderDeath.anchor.setTo(0.5, 0.5);\n        this.spiderDeath.exists = false;\n        this.machineGun = new CircularGun(this.game, 1);\n    }\n\n    appears(fromX: number, fromY: number, target: Phaser.Sprite) {\n        const beforeSpider = this.game.add.sprite(fromX, fromY, 'before-bird');\n        beforeSpider.anchor.setTo(0.5, 0.5);\n        const beforeSpiderAnimation = beforeSpider.animations.add('appears');\n        beforeSpiderAnimation.onComplete.add(() => {\n            beforeSpider.destroy();\n            this.reset(fromX, fromY, 10);\n            this.body.setSize(16, 16, 24, 48);\n            this.body.collideWorldBounds = true;\n            this.blackboard = new SpiderBlackboard();\n            this.enemy = target;\n        });\n        beforeSpiderAnimation.play(4, false);\n    }\n\n    kill(): Phaser.Sprite {\n        super.kill();\n        this.damageTween.stop(true);\n        this.tint = 0xFFFFFF;\n        this.spiderDeath.reset(this.x, this.y);\n        this.spiderDeath.animations.play(\"spider.hurt\", 6, false).killOnComplete = true;\n        return this;\n    }\n\n    update() {\n        super.update();\n        if (this.exists) {\n            this.executeBehaviorTree();\n        }\n    }\n\n    damage(amount: number): Phaser.Sprite {\n        if (!this.damageTween) {\n            this.damageTween = this.game.add.tween(this).from({ tint: 0xFF0000 }).to({ tint: 0xFFFFFF }, 500, Phaser.Easing.Linear.None, true, 0, 4, false);\n            this.damageTween.onComplete.add((): void => this.damageTween = null);\n        }\n        super.damage(amount);\n        return this;\n    }\n\n    private executeBehaviorTree() {\n        SpiderB3.get().tick(this, this.blackboard);\n    }\n\n    attackEnemy(): boolean {\n        this.body.velocity.x = 0;\n        this.body.velocity.y = 0;\n        if (!this.attackAnimation) {\n            [this.attackAnimation, this.attackDangerousOffset] = this.playAttackEnemyAnimation();\n        } else if (this.attackAnimation.isFinished) {\n            this.attackAnimation = null;\n            const enemyRectangle = new Phaser.Rectangle(this.enemy.left, this.enemy.top, this.enemy.width, this.enemy.height);\n            if (Phaser.Rectangle.containsPoint(enemyRectangle, this.getAttackPoint())) {\n                this.enemy.damage(1);\n            }\n        }\n        return true;\n    }\n\n    fire(): boolean {\n        this.body.velocity.x = 0;\n        this.body.velocity.y = 0;\n        let [_, fireOffset] = this.playFireAnimation();\n        let angle = Phaser.Math.angleBetween(this.body.center.x, this.body.center.y, this.enemy.body.center.x, this.enemy.body.center.y);\n        this.machineGun.fire(this.body.center.x + fireOffset.x, this.body.center.y + fireOffset.y, angle);\n        return true;\n    }\n\n    private playFireAnimation(): [Phaser.Animation, Phaser.Point] {\n        const dx = this.enemy.body.center.x - this.body.center.x;\n        const dy = this.enemy.body.center.y - this.body.center.y;\n        if (Math.abs(dx) > Math.abs(dy)) {\n            if (dx < 0) {\n                return [this.play(\"spider.stand.left\", 6, false), new Phaser.Point(-24, -16)];\n            } else if (dx > 0) {\n                return [this.play(\"spider.stand.right\", 6, false), new Phaser.Point(24, -16)];\n            } else if (dy < 0) {\n                return [this.play(\"spider.stand.back\", 6, false), new Phaser.Point(8, -48)];\n            } else if (dy > 0) {\n                return [this.play(\"spider.stand.front\", 6, false), new Phaser.Point(-8, 8)];\n            } else {\n                return [this.play(\"spider.stand.right\", 6, false), new Phaser.Point(24, -16)];\n            }\n        } else {\n            if (dy < 0) {\n                return [this.play(\"spider.stand.back\", 8, false), new Phaser.Point(8, -48)];\n            } else if (dy > 0) {\n                return [this.play(\"spider.stand.front\", 8, false), new Phaser.Point(-8, 8)];\n            } else if (dx < 0) {\n                return [this.play(\"spider.stand.left\", 8, false), new Phaser.Point(-24, -16)];\n            } else if (dx > 0) {\n                return [this.play(\"spider.stand.right\", 8, false), new Phaser.Point(24, -16)];\n            } else {\n                return [this.play(\"spider.stand.back\", 8, false), new Phaser.Point(8, -48)];\n            }\n        }\n    }\n\n    private getAttackPoint(): Phaser.Point {\n        if (this.attackDangerousOffset) {\n            return new Phaser.Point(this.body.center.x + this.attackDangerousOffset.x, this.body.center.y + this.attackDangerousOffset.y);\n        } else {\n            return null;\n        }\n    }\n\n    private playAttackEnemyAnimation(): [Phaser.Animation, Phaser.Point] {\n        const dx = this.enemy.body.center.x - this.body.center.x;\n        const dy = this.enemy.body.center.y - this.body.center.y;\n        if (Math.abs(dx) > Math.abs(dy)) {\n            if (dx < 0) {\n                return [this.play(\"spider.attack.left\", 8, false), new Phaser.Point(-24, -16)];\n            } else if (dx > 0) {\n                return [this.play(\"spider.attack.right\", 8, false), new Phaser.Point(24, -16)];\n            } else if (dy < 0) {\n                return [this.play(\"spider.attack.back\", 8, false), new Phaser.Point(8, -48)];\n            } else if (dy > 0) {\n                return [this.play(\"spider.attack.front\", 8, false), new Phaser.Point(-8, 8)];\n            } else {\n                return [this.play(\"spider.attack.right\", 8, false), new Phaser.Point(24, -16)];\n            }\n        } else {\n            if (dy < 0) {\n                return [this.play(\"spider.attack.back\", 8, false), new Phaser.Point(8, -48)];\n            } else if (dy > 0) {\n                return [this.play(\"spider.attack.front\", 8, false), new Phaser.Point(-8, 8)];\n            } else if (dx < 0) {\n                return [this.play(\"spider.attack.left\", 8, false), new Phaser.Point(-24, -16)];\n            } else if (dx > 0) {\n                return [this.play(\"spider.attack.right\", 8, false), new Phaser.Point(24, -16)];\n            } else {\n                return [this.play(\"spider.attack.back\", 8, false), new Phaser.Point(8, -48)];\n            }\n        }\n    }\n}\n\nclass SpiderBlackboard extends b3.Blackboard {\n    currentPathPointTarget: Phaser.Point;\n    path: Array<Phaser.Point>;\n}\n\nclass SpiderB3 extends b3.Tree<Spider, SpiderBlackboard> {\n\n    private static singleton: SpiderB3;\n    static get() {\n        return this.singleton || (this.singleton = new SpiderB3());\n    }\n\n    constructor() {\n        super();\n        this.root = this.selector(\n            this.sequence(new ConditionIsNearEnemy(), new ActionAttackEnemy()),\n            this.sequence(new ConditionIsEnemyInLineOfFire(), new ActionFire()),\n            new ActionFollowPath(),\n            new ActionSearchAPathToEnemy());\n    }\n}\n\nclass ActionFollowPath extends b3.Action<Spider, SpiderBlackboard> {\n    tick(t: b3.Tick<Spider, SpiderBlackboard>): b3.NodeState {\n        let me = t.me;\n        let currentPathPointTarget = t.blackboard.currentPathPointTarget;\n        if (currentPathPointTarget) {\n            this.moveToXY(me, currentPathPointTarget.x, currentPathPointTarget.y, 300);\n            if (Phaser.Math.distance(me.body.center.x, me.body.center.y, currentPathPointTarget.x, currentPathPointTarget.y) < me.body.halfWidth) {\n                t.blackboard.currentPathPointTarget = null;\n            }\n        } else {\n            let path = t.blackboard.path || [];\n            t.blackboard.currentPathPointTarget = path.shift();\n            if (path.length == 0) {\n                me.body.velocity.x = 0;\n                me.body.velocity.y = 0;\n                return b3.NodeState.FAILURE;\n            }\n        }\n        this.animate(me);\n        return b3.NodeState.RUNNING;\n    }\n\n    animate(me: Spider) {\n        if (Math.abs(me.body.velocity.x) > Math.abs(me.body.velocity.y)) {\n            if (me.body.velocity.x < 0) {\n                me.play(\"spider.walk.left\", 8, false);\n            } else if (me.body.velocity.x > 0) {\n                me.play(\"spider.walk.right\", 8, false);\n            } else if (me.body.velocity.y < 0) {\n                me.play(\"spider.walk.back\", 8, false);\n            } else if (me.body.velocity.y > 0) {\n                me.play(\"spider.walk.front\", 8, false);\n            } else {\n                me.play(\"spider.hurt\", 0, false);\n            }\n        } else {\n            if (me.body.velocity.y < 0) {\n                me.play(\"spider.walk.back\", 8, false);\n            } else if (me.body.velocity.y > 0) {\n                me.play(\"spider.walk.front\", 8, false);\n            } else if (me.body.velocity.x < 0) {\n                me.play(\"spider.walk.left\", 8, false);\n            } else if (me.body.velocity.x > 0) {\n                me.play(\"spider.walk.right\", 8, false);\n            } else {\n                me.play(\"lpc.hurt\", 0, false);\n            }\n        }\n    }\n\n    moveToXY(me: Spider, x: number, y: number, speed: number = 60) {\n        var angle = Math.atan2(y - me.body.center.y, x - me.body.center.x);\n        me.body.velocity.x = Math.cos(angle) * speed;\n        me.body.velocity.y = Math.sin(angle) * speed;\n    }\n}\n\nclass ActionSearchAPathToEnemy extends b3.Action<Spider, SpiderBlackboard> {\n\n    thinking = new b3.BlackboardKey<boolean>();\n\n    tick(t: b3.Tick<Spider, SpiderBlackboard>): b3.NodeState {\n        let thinking = t.blackboard.get(this.thinking) || false;\n        let me = t.me;\n        if (!thinking) {\n            t.blackboard.set(this.thinking, true);\n            me.pathfinder.findPath(me.body.center.x, me.body.center.y, me.enemy.body.center.x, me.enemy.body.center.y, (path: Phaser.Point[]) => {\n                t.blackboard.path = path || [];\n                t.blackboard.set(this.thinking, false);\n            });\n        }\n        let path = t.blackboard.path || [];\n        return path.length > 0 ? b3.NodeState.SUCCESS : b3.NodeState.RUNNING;\n    }\n}\n\nclass ConditionIsEnemyInLineOfFire extends b3.Condition<Spider, SpiderBlackboard> {\n    check(t: b3.Tick<Spider, SpiderBlackboard>): boolean {\n        let me = t.me;\n        if (me.enemy) {\n            const epsilon = 10 * Phaser.Math.PI2 / 360;\n            let angle = Phaser.Math.angleBetween(me.body.center.x, me.body.center.y, me.enemy.body.center.x, me.enemy.body.center.y);\n            angle = Phaser.Math.normalizeAngle(angle);\n            if (Phaser.Math.fuzzyEqual(angle, Phaser.Math.PI2, epsilon)) {\n                return true;\n            }\n            if (Phaser.Math.fuzzyEqual(angle, Math.PI / 2, epsilon)) {\n                return true;\n            }\n            if (Phaser.Math.fuzzyEqual(angle, Math.PI, epsilon)) {\n                return true;\n            }\n            if (Phaser.Math.fuzzyEqual(angle, 3 * Math.PI / 2, epsilon)) {\n                return true;\n            }\n\n        }\n        return false;\n    }\n}\n\nclass ActionFire extends b3.Action<Spider, SpiderBlackboard> {\n    tick(t: b3.Tick<Spider, SpiderBlackboard>): b3.NodeState {\n        t.me.fire();\n        return b3.NodeState.RUNNING;\n    }\n}\n\nclass ConditionIsNearEnemy extends b3.Condition<Spider, SpiderBlackboard> {\n    check(t: b3.Tick<Spider, SpiderBlackboard>): boolean {\n        let me = t.me;\n        return me.enemy && Phaser.Math.distance(me.body.center.x, me.body.center.y, me.enemy.body.center.x, me.enemy.body.center.y) < me.body.width * 2;\n    }\n}\n\nclass ActionAttackEnemy extends b3.Action<Spider, SpiderBlackboard> {\n    tick(t: b3.Tick<Spider, SpiderBlackboard>): b3.NodeState {\n        if (t.me.attackEnemy()) {\n            return b3.NodeState.SUCCESS;\n        } else {\n            return b3.NodeState.RUNNING;\n        }\n    }\n}\n\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {Spider} from \"./Spider\";\nimport { ShmuprpgGame } from \"../ShmuprpgGame\";\nimport { Level } from \"../states/Level\";\nimport { Pathfinder } from \"../ia/services/Pathfinder\";\n\nexport class SpiderHorde extends Phaser.Group {\n\n    appearsRate = 10000;\n    target: Phaser.Sprite;\n    private nextAppearsTime = 0;\n    private pathfinder: Pathfinder;\n\n    constructor(target: Phaser.Sprite, pathFinder: Pathfinder, maxSpiders: number = 4) {\n        super(target.game);\n        this.pathfinder = pathFinder;\n        this.reset(target, maxSpiders);\n\n    }\n\n    reset(target: Phaser.Sprite, maxSpiders: number = 4) {\n        this.target = target;\n        this.removeAll();\n        for (let i = 0; i < maxSpiders; ++i) {\n            this.add(this.createSpider());\n        }\n    }\n\n    static preload(game: Phaser.Game) {\n        game.load.atlasXML('spider', 'sprites/lpc/spiders/spider01.png', 'sprites/lpc/spiders/spider.xml');\n    }\n\n    update() {\n        super.update();\n        this.appears();\n    }\n\n    private createSpider(): Spider {\n        const spider = new Spider(this.game, this.pathfinder);\n        const game = <ShmuprpgGame>this.game;\n        game.addSpriteAnimation(spider.spiderDeath, 'spider.hurt', 6);\n        game.addSpriteAnimation(spider, 'spider.stand.back', 6);\n        game.addSpriteAnimation(spider, 'spider.stand.front', 6);\n        game.addSpriteAnimation(spider, 'spider.stand.left', 6);\n        game.addSpriteAnimation(spider, 'spider.stand.right', 6);\n        game.addSpriteAnimation(spider, 'spider.walk.back', 9);\n        game.addSpriteAnimation(spider, 'spider.walk.front', 9);\n        game.addSpriteAnimation(spider, 'spider.walk.left', 9);\n        game.addSpriteAnimation(spider, 'spider.walk.right', 9);\n        game.addSpriteAnimation(spider, 'spider.attack.back', 9);\n        game.addSpriteAnimation(spider, 'spider.attack.front', 9);\n        game.addSpriteAnimation(spider, 'spider.attack.left', 9);\n        game.addSpriteAnimation(spider, 'spider.attack.right', 9);\n        return spider;\n    }\n\n    private appears() {\n        if (this.game.time.time >= this.nextAppearsTime) {\n            const spider = <Spider>this.getFirstExists(false);\n            if (spider) {\n                const pos = this.pathfinder.randomWalkablePos();\n                spider.appears(pos.x, pos.y, this.target);\n                this.nextAppearsTime = this.game.time.time + this.appearsRate;\n            }\n        }\n    }\n}","export class Tree<ME, BB extends Blackboard> {\n    root: Node<ME,BB>;\n\n    tick(me: ME, blackboard: BB) {\n        const t = new Tick(me, blackboard);\n        this.root.tick(t);\n    }\n\n    sequence(...children: Node<ME,BB>[]): Sequence<ME,BB> {\n        return new Sequence<ME,BB>(...children);\n    }\n\n    selector(...children: Node<ME,BB>[]): Sequence<ME,BB> {\n        return new Selector<ME,BB>(...children);\n    }\n\n    parallel(...children: Node<ME,BB>[]): Sequence<ME,BB> {\n        return new Parallel<ME,BB>(...children);\n    }\n}\n\nexport class BlackboardKey<T> {\n    id = Symbol();\n}\n\nexport class Blackboard {\n    data = {};\n    \n    get<T>(k: BlackboardKey<T>): T {\n        return <T>this.data[k.id];\n    }\n    set<T>(k: BlackboardKey<T>, value: T) {\n        this.data[k.id] = value;\n    }\n    reset() {\n        this.data = {};\n    }\n}\n\nexport class Tick<ME, BB> {\n    me: ME;\n    blackboard: BB;\n\n    constructor(me: ME, b: BB) {\n        this.blackboard = b;\n        this.me = me;\n    }\n}\n\nexport enum NodeState {\n    SUCCESS, FAILURE, RUNNING\n}\n\nexport abstract class Node<ME,BB> {\n\n    abstract tick(t: Tick<ME,BB>): NodeState;\n}\n\n\nexport abstract class Branch<ME,BB> extends Node<ME,BB> {\n    children: Node<ME,BB>[];\n    constructor(...children: Node<ME,BB>[]) {\n        super();\n        this.children = children;\n    }\n\n}\n\nexport abstract class Leaf<ME,BB> extends Node<ME,BB> {\n\n}\n\nexport class Selector<ME,BB> extends Branch<ME,BB> {\n\n    constructor(...children: Node<ME,BB>[]) {\n        super(...children);\n    }\n    tick(t: Tick<ME,BB>): NodeState {\n        for (let c of this.children) {\n            switch (c.tick(t)) {\n                case NodeState.SUCCESS:\n                    return NodeState.SUCCESS;\n                case NodeState.RUNNING:\n                    return NodeState.RUNNING;\n            }\n        }\n        return NodeState.FAILURE;\n    }\n}\n\nexport class Sequence<ME,BB> extends Branch<ME,BB> {\n\n    constructor(...children: Node<ME,BB>[]) {\n        super(...children);\n    }\n    tick(t: Tick<ME,BB>): NodeState {\n        for (let c of this.children) {\n            switch (c.tick(t)) {\n                case NodeState.FAILURE:\n                    return NodeState.FAILURE;\n                case NodeState.RUNNING:\n                    return NodeState.RUNNING;\n            }\n        }\n        return NodeState.SUCCESS;\n    }\n}\n\nexport class Parallel<ME,BB> extends Branch<ME,BB> {\n    successThreshold: number;\n    failureThreshold: number;\n\n    constructor(...children: Node<ME,BB>[]) {\n        super(...children);\n    }\n\n    tick(t: Tick<ME,BB>): NodeState {\n        let failures = 0, successes = 0;\n        for (let c of this.children) {\n            switch (c.tick(t)) {\n                case NodeState.FAILURE:\n                    return ++failures;\n                case NodeState.SUCCESS:\n                    return ++successes;\n            }\n        }\n        if (successes >= this.successThreshold) {\n            return NodeState.SUCCESS;\n        } else if (failures >= this.failureThreshold) {\n            return NodeState.FAILURE;\n        } else {\n            return NodeState.RUNNING;\n        }\n    }\n}\n\nexport abstract class Decorator<ME,BB> extends Node<ME,BB> {\n    child: Node<ME,BB>;\n\n    constructor(child: Node<ME,BB>) {\n        super();\n        this.child = child;\n    }\n}\n\nexport abstract class Action<ME,BB> extends Leaf<ME,BB> {\n\n}\n\nexport abstract class Condition<ME,BB> extends Leaf<ME,BB> {\n\n    abstract check(t: Tick<ME,BB>): boolean;\n\n    tick(t: Tick<ME,BB>): NodeState {\n        if (this.check(t)) {\n            return NodeState.SUCCESS;\n        } else {\n            return NodeState.FAILURE;\n        }\n    }\n}\n","/// <reference path=\"../../../typings/easystarjs.d.ts\" />\n/// <reference path=\"../../../typings/brunch-require.d.ts\" />\nimport EasyStar = require('easystarjs');\n\nexport class Pathfinder {\n\n    private easystar: EasyStar.js;\n    private map: Phaser.Tilemap;\n\n    constructor(map: Phaser.Tilemap) {\n        this.map = map;\n        const pathfindLayer = map.getLayerIndex('pathfind');\n        const grid = new Array<Array<number>>();\n        for (let row = 0; row < map.height; ++row) {\n            var gridRow = new Array<number>(map.width);\n            for (let column = 0; column < map.width; ++column) {\n                const tile = map.getTile(column, row, pathfindLayer);\n                gridRow[column] = this.isTileWalkable(tile) ? 1 : 0;\n            }\n            grid[row] = gridRow;\n        }\n        this.easystar = new EasyStar.js();\n        this.easystar.setGrid(grid);\n        this.easystar.enableDiagonals();\n        this.easystar.setAcceptableTiles([1]);\n    }\n\n    randomWalkablePos(): Phaser.Point {\n        const pathfindLayer = this.map.getLayerIndex('pathfind');\n        const rnd = this.map.game.rnd;\n        const maxChances = this.map.width * this.map.height;\n        for (let i = 0; i < maxChances; ++i) {\n            const x = rnd.integerInRange(0, this.map.width - 1);\n            const y = rnd.integerInRange(0, this.map.height - 1);\n            const tile = this.map.getTile(x, y, pathfindLayer);\n            if (this.isTileWalkable(tile)) {\n                return new Phaser.Point(tile.worldX, tile.worldY);\n            }\n        }\n        return null;\n    }\n\n    isTileWalkable(tile: Phaser.Tile) {\n        return tile && tile.properties['walkable'] == 1;\n    }\n\n    findPath(startX: number, startY: number, endX: number, endY: number, callback: (path: Phaser.Point[]) => void) {\n        const tileStart = this.map.getTileWorldXY(startX, startY);\n        const tileEnd = this.findNearestWalkableTile(endX, endY);\n        if (!tileStart) {\n            console.log('cannot find path starting out of the map: (' + startX + ';' + startY + ')');\n            return;\n        }\n        if (tileEnd) {\n            this.easystar.findPath(tileStart.x, tileStart.y, tileEnd.x, tileEnd.y, (path: { x: number, y: number }[]) => {\n                let worldPath: Array<Phaser.Point>;\n                if (path && path.length > 1) {\n                    worldPath = new Array<Phaser.Point>(path.length - 1);\n                    for (let i = 1; i < path.length; ++i) {\n                        const tile = this.map.getTile(path[i].x, path[i].y);\n                        worldPath[i - 1] = new Phaser.Point(tile.worldX + tile.width / 2, tile.worldY + tile.height / 2);\n                    }\n                } else {\n                    worldPath = new Array<Phaser.Point>();\n                }\n                callback(worldPath);\n            });\n        } else {\n            callback(new Array<Phaser.Point>());\n        }\n    }\n    findNearestWalkableTile(endX: number, endY: number) {\n        const pathfindLayer = this.map.getLayerIndex('pathfind');\n        const tile = this.map.getTileWorldXY(endX, endY, this.map.tileWidth, this.map.tileHeight, pathfindLayer);\n        if (this.isTileWalkable(tile)) {\n            return tile;\n        }\n        let minTile = null;\n        let minTileDistance = null;\n        for (let dx = -10; dx < 10; ++dx) {\n            for (let dy = -10; dy < 10; ++dy) {\n                const t = this.map.getTile(tile.x + dx, tile.y + dy, pathfindLayer);\n                if (this.isTileWalkable(t)) {\n                    const tileDistance = Phaser.Math.distanceSq(0, 0, dx, dy);\n                    if (!minTileDistance || tileDistance < minTileDistance) {\n                        minTileDistance = tileDistance;\n                        minTile = t;\n                    }\n                }\n            }\n        }\n        return minTile;\n    }\n    update() {\n        this.easystar.calculate();\n    }\n\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nexport abstract class AbstractState extends Phaser.State {\n\n    constructor() {\n        super();\n    }\n\n    create() {\n        this.game.input.keyboard.addKey(Phaser.Keyboard.F11).onDown.add(() => this.toggleFullscreen());\n    }\n\n    toggleFullscreen() {\n        if (this.game.scale.isFullScreen) {\n            this.game.scale.stopFullScreen();\n        } else {\n            this.game.scale.startFullScreen();\n        }\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {AbstractState} from \"./AbstractState\";\nimport {MenuButton} from \"../ui/MenuButton\";\n\nexport class DemoEnding extends AbstractState {\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        this.game.load.image('demo_ending', 'help/demo_ending.png');\n        MenuButton.preload(this.game);\n    }\n\n    create() {\n        super.create();\n        let logo = this.game.add.sprite(0, 0, 'demo_ending');\n        new MenuButton(this.game, \"Back\", 500, 900, () => this.game.state.start('Title'));\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport { AbstractState } from \"./AbstractState\"; // you import only AClass\nimport {MenuButton} from \"../ui/MenuButton\";\n\nexport class GameOver extends AbstractState {\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        this.game.load.image('gameover', 'gameover/gameover.png');\n    }\n\n    create() {\n        super.create();\n        this.game.add.image(0, 0, 'gameover');\n        new MenuButton(this.game, \"Main menu\", 500, 900, () => this.game.state.start('Title'));\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {AbstractState} from \"./AbstractState\";\nimport {MenuButton} from \"../ui/MenuButton\";\n\nexport class GamepadOptions extends AbstractState {\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        MenuButton.preload(this.game);\n    }\n\n    create() {\n        super.create();\n        let title = this.game.add.text(this.game.world.centerX, 0, 'Choose gamepad', { font: \"68px monospace\", fill: 'white' });\n        title.scale.x = 2;\n        title.scale.y = 2;\n        title.anchor.setTo(0.5, 0);\n\n        let subtitle = this.game.add.text(0, 0, 'Move stick or press button to show gamepad number', { font: \"60px monospace\", fill: 'white' });\n        subtitle.y = this.game.world.height - subtitle.height;\n\n        new GamepadMenuButton(this.input.gamepad.pad1, 0xFF6666, \"Gamepad 1\", 500, 200, () => {\n            this.game.state.start('GamepadOptionsLayout', true, false, 1);\n        });\n        new GamepadMenuButton(this.input.gamepad.pad2, 0x66FF66, \"Gamepad 2\", 500, 350, () => {\n            this.game.state.start('GamepadOptionsLayout', true, false, 2);\n        });\n        new GamepadMenuButton(this.input.gamepad.pad3, 0x6666FF, \"Gamepad 3\", 500, 500, () => {\n            this.game.state.start('GamepadOptionsLayout', true, false, 3);\n        });\n        new GamepadMenuButton(this.input.gamepad.pad4, 0xFFFF66, \"Gamepad 4\", 500, 650, () => {\n            this.game.state.start('GamepadOptionsLayout', true, false, 4);\n        });\n        new MenuButton(this.game, \"Back\", 500, 800, () => this.game.state.start('Options'));\n    }\n}\n\nclass GamepadMenuButton extends MenuButton {\n    pad: Phaser.SinglePad;\n    activePadTint: number;\n    constructor(pad: Phaser.SinglePad, activePadTint: number, label: string, x: number, y: number, callback: Function) {\n        super(pad.game, label, x, y, callback);\n        this.pad = pad;\n        this.activePadTint = activePadTint;\n    }\n\n    update() {\n        super.update();\n\n        if (this.isPadActive()) {\n            this.tint = this.activePadTint;\n        } else {\n            this.tint = 0xFFFFFF;\n        }\n    }\n\n    isPadActive(): boolean {\n        for (let b = 0; b < 16; ++b) {\n            let button = this.pad.getButton(b);\n            if (button && button.isDown) {\n                return true;\n            }\n        }\n        for (let a = 0; a < 16; ++a) {\n            if (Math.abs(this.pad.axis(a)) > this.pad.deadZone) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {AbstractState} from \"./AbstractState\";\nimport {MenuButton} from \"../ui/MenuButton\";\nimport {ShmuprpgGame} from \"../ShmuprpgGame\";\n\n\nexport class GamepadOptionsBindAxis extends AbstractState {\n\n    bindings = [\n        { label: 'Pull move X axis', localStorageKeySuffix: 'moveXAxis' },\n        { label: 'Pull move Y axis', localStorageKeySuffix: 'moveYAxis' },\n        { label: 'Pull shoot X axis', localStorageKeySuffix: 'shootXAxis' },\n        { label: 'Pull shoot Y axis', localStorageKeySuffix: 'shootYAxis' }\n    ];\n\n    currentBinding: number = 0;\n    pad: Phaser.SinglePad;\n    padIndex = 1;\n    waitForNoInput: number;\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        MenuButton.preload(this.game);\n    }\n\n    init(padIndex: number, binding: number = 0) {\n        padIndex = padIndex || 1;\n        this.padIndex = 1;\n        this.pad = this.input.gamepad['pad' + this.padIndex];\n        if (binding >= this.bindings.length) {\n            this.currentBinding = 0;\n            (this.game as ShmuprpgGame).controls.useCustomGamepadLayout(padIndex);\n            this.game.state.start('GamepadOptions');\n        } else {\n            this.currentBinding = binding;\n        }\n        this.waitForNoInput = 60;\n    }\n\n    create() {\n        super.create();\n        let logo = this.game.add.text(this.game.world.centerX, 0, this.bindings[this.currentBinding].label, { font: \"68px monospace\", fill: 'white' });\n        logo.scale.x = 2;\n        logo.scale.y = 2;\n        logo.anchor.setTo(0.5, 0);\n        new MenuButton(this.game, \"Back\", 500, 900, () => this.game.state.start('GamepadOptions'));\n    }\n\n    update() {\n        super.update();\n        let activationZone = Math.max(0.99, Math.min(0.8, 4 * this.pad.deadZone));\n        for (var k in Phaser.Gamepad) {\n            if (k.startsWith('AXIS_')) {\n                let axisCode = Phaser.Gamepad[k];\n                if (Math.abs(this.pad.axis(axisCode)) >= activationZone) {\n                    if (this.waitForNoInput > 0) {\n                        return;\n                    } else {\n                        localStorage.setItem('gamepad' + this.padIndex + '.layout.custom.' + this.bindings[this.currentBinding].localStorageKeySuffix, axisCode);\n                        this.game.state.start('GamepadOptionsBindAxis', true, false, this.padIndex, this.currentBinding + 1);\n                        return;\n                    }\n                }\n            }\n        }\n        this.waitForNoInput--;\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {AbstractState} from \"./AbstractState\";\nimport {MenuButton} from \"../ui/MenuButton\";\nimport {ShmuprpgGame} from \"../ShmuprpgGame\";\n\nexport class GamepadOptionsLayout extends AbstractState {\n    padIndex: number;\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        MenuButton.preload(this.game);\n    }\n\n    init(padIndex : number) {\n        this.padIndex = padIndex || 1;\n    }\n\n    create() {\n        super.create();\n        let title = this.game.add.text(this.game.world.centerX, 0, 'Choose gamepad layout', { font: \"68px monospace\", fill: 'white' });\n        title.scale.x = 2;\n        title.scale.y = 2;\n        title.anchor.setTo(0.5, 0);\n\n        new MenuButton(this.game, \"Xbox\", 500, 200, () => {\n            (this.game as ShmuprpgGame).controls.useXboxLayout(this.padIndex);\n            this.game.state.start('Options');\n        });\n        new MenuButton(this.game, \"Custom\", 500, 350, () => {\n            this.game.state.start('GamepadOptionsBindAxis', true, false, this.padIndex);\n        });\n        new MenuButton(this.game, \"Back\", 500, 500, () => this.game.state.start('Options'));\n    }\n}\n\nclass GamepadMenuButton extends MenuButton {\n    pad: Phaser.SinglePad;\n    activePadTint: number;\n    constructor(pad: Phaser.SinglePad, activePadTint: number, label: string, x: number, y: number, callback: Function) {\n        super(pad.game, label, x, y, callback);\n        this.pad = pad;\n        this.activePadTint = activePadTint;\n    }\n\n    update() {\n        super.update();\n\n        if (this.isPadActive()) {\n            this.tint = this.activePadTint;\n        } else {\n            this.tint = 0xFFFFFF;\n        }\n    }\n\n    isPadActive(): boolean {\n        for (let b = 0; b < 16; ++b) {\n            let button = this.pad.getButton(b);\n            if (button && button.isDown) {\n                return true;\n            }\n        }\n        for (let a = 0; a < 16; ++a) {\n            if (Math.abs(this.pad.axis(a)) > this.pad.deadZone) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {AbstractState} from \"./AbstractState\";\nimport {MenuButton} from \"../ui/MenuButton\";\n\nexport class Help extends AbstractState {\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        this.game.load.image('help', 'help/help.png');\n        MenuButton.preload(this.game);\n    }\n\n    create() {\n        super.create();\n        let logo = this.game.add.sprite(0, 0, 'help');\n        new MenuButton(this.game, \"Back\", 500, 900, () => this.game.state.start('Title'));\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport { AbstractState } from \"./AbstractState\"; // you import only AClass\n\nexport class Intro extends AbstractState {\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        this.game.load.video('intro', 'intro/intro.webm');\n    }\n\n    create() {\n        super.create();\n        var video = this.game.add.video('intro');\n        video.play();\n        video.addToWorld(this.game.world.centerX, this.game.world.centerY, 0.5, 0.5);\n        video.onComplete.add(() => this.game.state.start('Title'));\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {AbstractState} from \"./AbstractState\";\nimport {MenuButton} from \"../ui/MenuButton\";\nimport { ShmuprpgGame } from \"../ShmuprpgGame\";\n\n\nexport class KeyboardOptions extends AbstractState {\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        MenuButton.preload(this.game);\n    }\n\n    create() {\n        super.create();\n        let logo = this.game.add.text(this.game.world.centerX, 0, 'Choose keyboard layout',{font: \"68px monospace\", fill: 'white'});\n        logo.scale.x = 2;\n        logo.scale.y = 2;\n        logo.anchor.setTo(0.5, 0);\n\n        new MenuButton(this.game, \"Azerty zsqd ikjl\", 500, 300, () => {\n            (<ShmuprpgGame>this.game).controls.useAzertyLayout();\n            this.game.state.start('Options');\n        });\n        new MenuButton(this.game, \"Qwerty wsad ikjl\", 500, 450, () => {\n            (<ShmuprpgGame>this.game).controls.useQwertyLayout();\n            this.game.state.start('Options');\n        });\n        new MenuButton(this.game, \"Others ⬆⬇⬅➡ ikjl\", 500, 600, () => {\n            (<ShmuprpgGame>this.game).controls.useOtherKeyboardLayout();\n            this.game.state.start('Options');\n        });\n        new MenuButton(this.game, \"Custom\", 500, 750, () => {\n            (<ShmuprpgGame>this.game).controls.useOtherKeyboardLayout();\n            this.game.state.start('KeyboardOptionsBindKey', true, false);\n        });\n        new MenuButton(this.game, \"Back\", 500, 900, () => this.game.state.start('Options'));\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {AbstractState} from \"./AbstractState\";\nimport {MenuButton} from \"../ui/MenuButton\";\nimport { ShmuprpgGame } from \"../ShmuprpgGame\";\n\n\nexport class KeyboardOptionsBindKey extends AbstractState {\n\n    bindings = [\n        { label: 'Press move up key', localStorageKey: 'keyboard.layout.custom.moveUp' },\n        { label: 'Press move down key', localStorageKey: 'keyboard.layout.custom.moveDown' },\n        { label: 'Press move left key', localStorageKey: 'keyboard.layout.custom.moveLeft' },\n        { label: 'Press move right key', localStorageKey: 'keyboard.layout.custom.moveRight' },\n        { label: 'Press shoot up key', localStorageKey: 'keyboard.layout.custom.shootUp' },\n        { label: 'Press shoot down key', localStorageKey: 'keyboard.layout.custom.shootDown' },\n        { label: 'Press shoot left key', localStorageKey: 'keyboard.layout.custom.shootLeft' },\n        { label: 'Press shoot right key', localStorageKey: 'keyboard.layout.custom.shootRight' }\n     ];\n\n    currentBinding: number = 0;\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        MenuButton.preload(this.game);\n    }\n\n    init(binding: number = 0) {\n        if (binding >= this.bindings.length) {\n            this.currentBinding = 0;\n            (this.game as ShmuprpgGame).controls.useCustomKeyboardLayout();\n            this.game.state.start('KeyboardOptions');\n        } else {\n            this.currentBinding = binding;\n        }\n    }\n\n    create() {\n        super.create();\n        let logo = this.game.add.text(this.game.world.centerX, 0, this.bindings[this.currentBinding].label, { font: \"68px monospace\", fill: 'white' });\n        logo.scale.x = 2;\n        logo.scale.y = 2;\n        logo.anchor.setTo(0.5, 0);\n        new MenuButton(this.game, \"Back\", 500, 900, () => this.game.state.start('KeyboardOptions'));\n    }\n\n    update() {\n        for (var k in Phaser.KeyCode) {\n            let keycode = Phaser.KeyCode[k];\n            if (this.input.keyboard.isDown(keycode)) {\n                localStorage.setItem(this.bindings[this.currentBinding].localStorageKey, keycode);\n                this.game.state.start('KeyboardOptionsBindKey', true, false, this.currentBinding + 1);\n                break;\n            }\n        }\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport { AbstractState } from \"./AbstractState\";\nimport { Hero } from \"../entities/Hero\";\nimport {BirdFlock} from \"../entities/BirdFlock\";\nimport {GrobelinHorde} from \"../entities/GrobelinHorde\";\nimport {SpiderHorde} from \"../entities/SpiderHorde\";\nimport {Spider} from \"../entities/Spider\";\nimport {Bunny} from \"../entities/Bunny\";\n\nimport {Pathfinder} from \"../ia/services/Pathfinder\";\nimport {DamageResolver} from \"../utils/DamageResolver\";\n\nimport {Dialog} from \"../ui/Dialog\";\n\nexport class Level extends AbstractState {\n\n    hero: Hero;\n    collisionSprites: Phaser.Group;\n    birdFlock: BirdFlock;\n    grobelinHorde: GrobelinHorde;\n    spiderHorde: SpiderHorde;\n    pathfinder: Pathfinder;\n    damageResolver: DamageResolver;\n    bunnyGroup: Phaser.Group;\n    shouldCheckBunnyLiving: boolean;\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        BirdFlock.preload(this.game);\n        GrobelinHorde.preload(this.game);\n        SpiderHorde.preload(this.game);\n        Hero.preload(this.game);\n        Bunny.preload(this.game);\n        this.game.load.tilemap('map', 'levels/level1.json', null, Phaser.Tilemap.TILED_JSON);\n        this.game.load.image('terrains', 'sprites/lpc/terrains/terrains.png');\n        this.game.load.image('cottage', 'sprites/lpc/thatched-roof-cottage/cottage.png');\n        this.game.load.image('thatched-roof', 'sprites/lpc/thatched-roof-cottage/thatched-roof.png');\n        this.game.load.image('doors', 'sprites/lpc/windows-doors/doors.png');\n        this.game.load.image('windows', 'sprites/lpc/windows-doors/windows.png');\n        this.game.load.image('obj_misk_atlas', 'sprites/lpc/tile-atlas2/obj_misk_atlas.png');\n\n        Dialog.preload(this.game);\n    }\n\n    create() {\n        super.create();\n        this.game.physics.startSystem(Phaser.Physics.ARCADE);\n        const map = this.game.add.tilemap('map');\n        map.addTilesetImage('terrains');\n        map.addTilesetImage('cottage');\n        map.addTilesetImage('thatched-roof');\n        map.addTilesetImage('doors');\n        map.addTilesetImage('windows');\n        map.addTilesetImage('obj_misk_atlas');\n\n        const layer = map.createLayer('grounds');\n        map.createLayer('plants');\n        map.createLayer('walls');\n        map.createLayer('bridges');\n        map.createLayer('doors_and_windows');\n        map.createLayer('roofs');\n        layer.resizeWorld();\n\n        this.damageResolver = new DamageResolver(this.game);\n\n        this.collisionSprites = this.game.add.physicsGroup(Phaser.Physics.ARCADE);;\n        for (let o of map.objects['collision']) {\n            if (o.rectangle) {\n                const sprite = this.game.add.sprite(o.x, o.y);\n                this.game.physics.enable(sprite, Phaser.Physics.ARCADE);\n                sprite.body.immovable = true;\n                sprite.width = o.width;\n                sprite.height = o.height;\n                this.collisionSprites.add(sprite);\n            }\n        }\n\n        this.pathfinder = new Pathfinder(map);\n\n        this.hero = new Hero(this.game);\n        this.game.add.existing(this.hero);\n        this.birdFlock = new BirdFlock(this.hero, 0);\n        this.game.add.existing(this.birdFlock);\n        this.grobelinHorde = new GrobelinHorde(this.hero, this.pathfinder, 0);\n        this.game.add.existing(this.grobelinHorde);\n        this.spiderHorde = new SpiderHorde(this.hero, this.pathfinder, 0);\n        this.game.add.existing(this.spiderHorde);\n\n        this.bunnyGroup = this.game.add.group();\n\n        this.shouldCheckBunnyLiving = false;\n\n        this.startDialog();\n    }\n\n    startDialog() {\n        let dialog = new Dialog(this.game, \"What a beautiful day! I do not regret leaving the magic university to live in this farm with my wife, Clementine.\");\n        dialog.onFinishCallback = () => {\n            dialog.text = \"Speaking of her, she should be back from the forest soon. I hope she catched something good for diner.\";\n            dialog.onFinishCallback = () => {\n                dialog.text = \"Mmh that's strange, I am suddently feeling magic around and not a good one...\";\n                dialog.onFinishCallback = () => {\n                    dialog.destroy();\n                    this.startAction();\n                }\n            }\n        }\n    }\n\n    endingDialog() {\n        let dialog = new Dialog(this.game, \"What was that? It looks like somebody has invoked monsters and sent them to... me?\");\n        dialog.onFinishCallback = () => {\n            dialog.text = \"Clementine! I must go to the forest, maybe she is in danger!\";\n            dialog.onFinishCallback = () => {\n                this.game.state.start('DemoEnding');\n            }\n        }\n    }\n\n    startAction() {\n        this.game.time.events.add(1000, () => this.grobelinHorde.reset(this.hero, 3));\n        this.game.time.events.add(20 * 1000, () => this.spiderHorde.reset(this.hero, 4));\n        this.game.time.events.add(40 * 1000, () => this.birdFlock.reset(this.hero, 10));\n        this.game.time.events.add(60 * 1000, () => {\n            this.birdFlock.flyRate = Number.MAX_VALUE;\n            this.spiderHorde.appearsRate = Number.MAX_VALUE;\n            this.grobelinHorde.appearsRate = Number.MAX_VALUE;\n        });\n        this.game.time.events.add(80 * 1000, () => {\n            for (let i = 0; i < 4; ++i) {\n                let pos = this.pathfinder.randomWalkablePos();\n                let bunny = new Bunny(this.game, this.pathfinder);\n                bunny.appears(pos.x, pos.y);\n                this.bunnyGroup.add(bunny);\n            }\n            this.shouldCheckBunnyLiving = true;\n        });\n    }\n\n    update() {\n        this.pathfinder.update();\n        this.game.physics.arcade.collide(this.hero, this.collisionSprites);\n        this.resolveWeaponsEffects();\n        if(this.shouldCheckBunnyLiving && this.bunnyGroup.countLiving() == 0) {\n            this.shouldCheckBunnyLiving = false;\n            this.game.time.events.add(3 * 1000, () => {\n                this.endingDialog();\n            });\n        }\n    }\n\n    resolveWeaponsEffects() {\n        this.damageResolver.groupVersusGroup(this.hero.weapon, this.bunnyGroup);\n        for (let bunny of this.bunnyGroup.children) {\n            this.damageResolver.spriteVersusGroup(this.hero, (<Bunny>bunny).weapon);\n        }\n        this.damageResolver.spriteVersusGroup(this.hero, this.birdFlock);\n        this.damageResolver.groupVersusGroup(this.hero.weapon, this.birdFlock);\n        this.damageResolver.spriteVersusGroup(this.hero, this.birdFlock);\n        this.damageResolver.groupVersusGroup(this.hero.weapon, this.grobelinHorde);\n        this.damageResolver.groupVersusGroup(this.hero.weapon, this.spiderHorde);\n        for (let spider of this.spiderHorde.children) {\n            this.damageResolver.spriteVersusGroup(this.hero, (<Spider>spider).machineGun);\n        }\n    }\n\n    render() {\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {AbstractState} from \"./AbstractState\";\nimport {MenuButton} from \"../ui/MenuButton\";\n\nexport class Options extends AbstractState {\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        MenuButton.preload(this.game);\n    }\n\n    create() {\n        super.create();\n        let logo = this.game.add.text(this.game.world.centerX, 0, 'Options', { font: \"120px monospace\", fill: 'white' });\n        logo.scale.x = 2;\n        logo.scale.y = 2;\n        logo.anchor.setTo(0.5, 0);\n\n        let y = 150;\n        new MenuButton(this.game, \"Keyboard\", 500, y += 150, () => this.game.state.start('KeyboardOptions'));\n        if (this.input.gamepad.supported) {\n            new MenuButton(this.game, \"Gamepad\", 500, y += 150, () => this.game.state.start('GamepadOptions'));\n        }\n        new MenuButton(this.game, \"Back\", 500, y += 150, () => this.game.state.start('Title'));\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {AbstractState} from \"./AbstractState\";\nimport {MenuButton} from \"../ui/MenuButton\";\n\nexport class Title extends AbstractState {\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        this.game.load.image('logo', 'title/logo.png');\n        MenuButton.preload(this.game);\n    }\n\n    create() {\n        super.create();\n        let logo = this.game.add.sprite(this.game.world.centerX, 0, 'logo');\n        logo.scale.x = 2;\n        logo.scale.y = 2;\n        logo.anchor.setTo(0.5, 0);\n\n        new MenuButton(this.game, \"Start\", 500, 300, () => this.game.state.start('Level'));\n        new MenuButton(this.game, \"Options\", 500, 450, () => this.game.state.start('Options'));\n        new MenuButton(this.game, \"Help\", 500, 600, () => this.game.state.start('Help'));\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {Controls} from \"../utils/Controls\";\nimport {ShmuprpgGame} from \"../ShmuprpgGame\";\n\nexport class Dialog extends Phaser.Group {\n    private dialogText: Phaser.Text;\n    onFinishCallback: () => void;\n    controls: Controls;\n    passButtonWasDown = false;\n\n    constructor(game: Phaser.Game, text?: string) {\n        super(game);\n        let dialogBackground = game.add.image(0, 600, \"dialog_bg\", null, this);\n        dialogBackground.alpha = 0.9;\n\n        this.dialogText = game.add.text(game.world.centerX, 630, text,\n            {\n                font: \"64px monospace\"\n                , fill: \"white\"\n                , wordWrap: true\n                , wordWrapWidth: 1900\n            },\n            this);\n        this.dialogText.anchor.x = 0.5;\n\n        game.add.existing(this);\n        this.controls = (<ShmuprpgGame>game).controls;\n    }\n\n    set text(text: string) {\n        this.dialogText.text = text;\n    }\n\n    static preload(game: Phaser.Game) {\n        game.load.image('dialog_bg', 'dialog/dialog_bg.png');\n    }\n\n    update() {\n        let passButtonIsDown = this.controls.isPassDialogButtonDown();\n        if(this.passButtonWasDown && !passButtonIsDown) {\n            this.passButtonWasDown = false;\n            if (this.onFinishCallback) {\n                this.onFinishCallback();\n            }\n        } else {\n            this.passButtonWasDown = passButtonIsDown;\n        }\n    }\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nexport class MenuButton extends Phaser.Button{\n\n    labelText: Phaser.Text;\n    constructor(game: Phaser.Game, label: string, x: number, y: number, callback: Function) {\n        super(game, x, y, 'menu-buttons', callback, null, 'over', 'out', 'down');\n        this.labelText = new Phaser.Text(this.game, 140, 15, label, {font: \"64px monospace\", fill: 'white'});\n        this.addChild(this.labelText);\n        game.add.existing(this);\n    }\n\n    setText(text: string) {\n        this.labelText.setText(text);\n    }\n\n    static preload(game: Phaser.Game) {\n        game.load.atlasXML('menu-buttons', 'menu/buttons.png', 'menu/buttons.xml');\n    }\n\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\n\nexport class Controls {\n    kb: Phaser.Keyboard;\n    pad: Phaser.SinglePad;\n    game: Phaser.Game;\n    keyCodeMoveUp: number;\n    keyCodeMoveDown: number;\n    keyCodeMoveLeft: number;\n    keyCodeMoveRight: number;\n    keyCodeShootUp: number;\n    keyCodeShootDown: number;\n    keyCodeShootLeft: number;\n    keyCodeShootRight: number;\n    moveXAxis: number;\n    moveYAxis: number;\n    shootXAxis: number;\n    shootYAxis: number;\n\n    constructor(game: Phaser.Game) {\n        this.game = game;\n        game.input.gamepad.start();\n        this.kb = game.input.keyboard;\n        this.setupKeyboardLayout();\n        this.setupGamepadLayout();\n    }\n\n    setupKeyboardLayout() {\n        let layout = localStorage.getItem('keyboard.layout');\n        if (null == layout || layout == 'azerty') {\n            this.useAzertyLayout();\n        } else if (layout == 'qwerty') {\n            this.useQwertyLayout();\n        } else if (layout == 'other') {\n            this.useOtherKeyboardLayout();\n        } else if (layout == 'custom') {\n            this.useCustomKeyboardLayout();\n        }\n    }\n\n    useAzertyLayout() {\n        this.keyCodeMoveUp = Phaser.KeyCode.Z;\n        this.keyCodeMoveDown = Phaser.KeyCode.S;\n        this.keyCodeMoveLeft = Phaser.KeyCode.Q;\n        this.keyCodeMoveRight = Phaser.KeyCode.D;\n        this.keyCodeShootUp = Phaser.KeyCode.I;\n        this.keyCodeShootDown = Phaser.KeyCode.K;\n        this.keyCodeShootLeft = Phaser.KeyCode.J;\n        this.keyCodeShootRight = Phaser.KeyCode.L;\n        localStorage.setItem('keyboard.layout', 'azerty');\n    }\n\n    useQwertyLayout() {\n        this.keyCodeMoveUp = Phaser.KeyCode.W;\n        this.keyCodeMoveDown = Phaser.KeyCode.S;\n        this.keyCodeMoveLeft = Phaser.KeyCode.A;\n        this.keyCodeMoveRight = Phaser.KeyCode.D;\n        this.keyCodeShootUp = Phaser.KeyCode.I;\n        this.keyCodeShootDown = Phaser.KeyCode.K;\n        this.keyCodeShootLeft = Phaser.KeyCode.J;\n        this.keyCodeShootRight = Phaser.KeyCode.L;\n        localStorage.setItem('keyboard.layout', 'qwerty');\n    }\n\n    useOtherKeyboardLayout() {\n        this.keyCodeMoveUp = Phaser.KeyCode.UP;\n        this.keyCodeMoveDown = Phaser.KeyCode.DOWN;\n        this.keyCodeMoveLeft = Phaser.KeyCode.LEFT;\n        this.keyCodeMoveRight = Phaser.KeyCode.RIGHT;\n        this.keyCodeShootUp = Phaser.KeyCode.I;\n        this.keyCodeShootDown = Phaser.KeyCode.K;\n        this.keyCodeShootLeft = Phaser.KeyCode.J;\n        this.keyCodeShootRight = Phaser.KeyCode.L;\n        localStorage.setItem('keyboard.layout', 'other');\n    }\n\n    useCustomKeyboardLayout() {\n        this.keyCodeMoveUp = this.readNumberFromLocalStorage('keyboard.layout.custom.moveUp', Phaser.KeyCode.UP);\n        this.keyCodeMoveDown = this.readNumberFromLocalStorage('keyboard.layout.custom.moveDown', Phaser.KeyCode.DOWN);\n        this.keyCodeMoveLeft = this.readNumberFromLocalStorage('keyboard.layout.custom.moveLeft', Phaser.KeyCode.LEFT);\n        this.keyCodeMoveRight = this.readNumberFromLocalStorage('keyboard.layout.custom.moveRight', Phaser.KeyCode.RIGHT);\n        this.keyCodeShootUp = this.readNumberFromLocalStorage('keyboard.layout.custom.shootUp', Phaser.KeyCode.I);\n        this.keyCodeShootDown = this.readNumberFromLocalStorage('keyboard.layout.custom.shootDown', Phaser.KeyCode.K);\n        this.keyCodeShootLeft = this.readNumberFromLocalStorage('keyboard.layout.custom.shootLeft', Phaser.KeyCode.J);\n        this.keyCodeShootRight = this.readNumberFromLocalStorage('keyboard.layout.custom.shootRight', Phaser.KeyCode.L);\n        localStorage.setItem('keyboard.layout', 'custom');\n    }\n\n    setupGamepadLayout() {\n        let padIndex = parseInt(localStorage.getItem('gamepad')) || 1;\n        let layout = localStorage.getItem('gamepad' + padIndex + '.layout');\n        if (null == layout || layout == 'xbox') {\n            this.useXboxLayout(padIndex);\n        } else if (layout == 'custom') {\n            this.useCustomGamepadLayout(padIndex);\n        }\n    }\n\n    useXboxLayout(padIndex: number) {\n        padIndex = padIndex || 1;\n        this.pad = this.game.input.gamepad['pad' + padIndex];\n        this.moveXAxis = Phaser.Gamepad.XBOX360_STICK_LEFT_X;\n        this.moveYAxis = Phaser.Gamepad.XBOX360_STICK_LEFT_Y;\n        this.shootXAxis = Phaser.Gamepad.XBOX360_STICK_RIGHT_X;\n        this.shootYAxis = Phaser.Gamepad.XBOX360_STICK_RIGHT_Y;\n        localStorage.setItem('gamepad', padIndex.toString());\n        localStorage.setItem('gamepad' + padIndex + '.layout', 'xbox');\n    }\n\n    useCustomGamepadLayout(padIndex: number) {\n        padIndex = padIndex || 1;\n        this.pad = this.game.input.gamepad['pad' + padIndex];\n        this.moveXAxis = this.readNumberFromLocalStorage('gamepad' + padIndex + '.layout.custom.moveXAxis', Phaser.Gamepad.XBOX360_STICK_LEFT_X);\n        this.moveYAxis = this.readNumberFromLocalStorage('gamepad' + padIndex + '.layout.custom.moveYAxis', Phaser.Gamepad.XBOX360_STICK_LEFT_Y);\n        this.shootXAxis = this.readNumberFromLocalStorage('gamepad' + padIndex + '.layout.custom.shootXAxis', Phaser.Gamepad.XBOX360_STICK_RIGHT_X);\n        this.shootYAxis = this.readNumberFromLocalStorage('gamepad' + padIndex + '.layout.custom.shootYAxis', Phaser.Gamepad.XBOX360_STICK_RIGHT_Y);\n        localStorage.setItem('gamepad', padIndex.toString());\n        localStorage.setItem('gamepad' + padIndex + '.layout', 'custom');\n    }\n\n    readNumberFromLocalStorage(key: string, defaultValue: number) {\n        let i = parseInt(localStorage.getItem(key));\n        if (isNaN(i)) {\n            return defaultValue;\n        } else {\n            return i;\n        }\n    }\n\n    shootingAngle(shooterX: number, shooterY: number): number {\n        return this.firstNonNull(this.shootingAngleFromPointer(shooterX, shooterY)\n            , this.shootingAngleFromPad(), this.shootingFromKeyboard());\n    }\n\n    private firstNonNull<T>(...values: T[]): T {\n        for (let value of values) {\n            if (value != null) {\n                return value;\n            }\n        }\n        return null;\n    }\n\n    private shootingAngleFromPointer(shooterX: number, shooterY: number): number {\n        const pointer = this.game.input.activePointer;\n        if (pointer.isDown) {\n            return Phaser.Math.angleBetween(shooterX, shooterY, pointer.worldX, pointer.worldY);\n        } else {\n            return null;\n        }\n    }\n\n    private shootingAngleFromPad(): number {\n        let dx = this.pad.axis(this.shootXAxis);\n        let dy = this.pad.axis(this.shootYAxis);\n        dx = Math.abs(dx) <= this.pad.deadZone ? 0 : dx;\n        dy = Math.abs(dy) <= this.pad.deadZone ? 0 : dy;\n        if (dx != 0 || dy != 0) {\n            return Phaser.Math.angleBetween(0, 0, dx, dy);\n        } else {\n            return null;\n        }\n    }\n\n    private shootingFromKeyboard(): number {\n        let dx = 0;\n        if (this.kb.isDown(this.keyCodeShootLeft)) {\n            dx = -1;\n        } else if (this.kb.isDown(this.keyCodeShootRight)) {\n            dx = 1;\n        }\n        let dy = 0;\n        if (this.kb.isDown(this.keyCodeShootUp)) {\n            dy = -1;\n        } else if (this.kb.isDown(this.keyCodeShootDown)) {\n            dy = 1;\n        }\n        if (dx != 0 || dy != 0) {\n            return Phaser.Math.angleBetween(0, 0, dx, dy);\n        } else {\n            return null;\n        }\n    }\n\n    isGoingUp(): boolean {\n        return this.pad.axis(this.moveYAxis) < -this.pad.deadZone\n            || this.kb.isDown(this.keyCodeMoveUp);\n    }\n    isGoingDown(): boolean {\n        return this.pad.axis(this.moveYAxis) > this.pad.deadZone\n            || this.kb.isDown(this.keyCodeMoveDown);\n    }\n\n    isGoingLeft(): boolean {\n        return this.pad.axis(this.moveXAxis) < -this.pad.deadZone\n            || this.kb.isDown(this.keyCodeMoveLeft);\n    }\n\n    isGoingRight(): boolean {\n        return this.pad.axis(this.moveXAxis) > this.pad.deadZone\n            || this.kb.isDown(this.keyCodeMoveRight);\n    }\n\n    isPassDialogButtonDown(): boolean {\n        return this.game.input.activePointer.isDown\n            || this.pad.isDown(Phaser.Gamepad.XBOX360_A);\n    }\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nexport class DamageResolver {\n    game: Phaser.Game;\n\n    constructor(game: Phaser.Game) {\n        this.game = game;\n    }\n\n    groupVersusGroup(groupA: Phaser.Group, groupB: Phaser.Group) {\n        for (let spriteA of groupA.children) {\n            if (spriteA instanceof Phaser.Sprite) {\n                this.spriteVersusGroup(spriteA, groupB);\n            }\n        }\n    }\n\n    spriteVersusGroup(spriteA: Phaser.Sprite, groupB: Phaser.Group) {\n        if (spriteA.exists) {\n            for (let spriteB of groupB.children) {\n                if (spriteB instanceof Phaser.Sprite) {\n                    this.spriteVersusSprite(spriteA, spriteB);\n                }\n            }\n        }\n    }\n\n    spriteVersusSprite(spriteA: Phaser.Sprite, spriteB: Phaser.Sprite) {\n        if (spriteA.exists && spriteB.exists && spriteA.overlap(spriteB)) {\n            spriteA.damage(1);\n            spriteB.damage(1);\n        }\n    }\n\n}"]}