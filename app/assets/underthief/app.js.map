{"version":3,"sources":["app/UnderthiefApp.ts","app/UnderthiefGame.ts","app/entities/Player.ts","app/entities/Team.ts","app/entities/Underwear.ts","app/ia/decisions/b3.ts","app/ia/services/Pathfinder.ts","app/states/AbstractState.ts","app/states/GamepadOptions.ts","app/states/GamepadOptionsBindAxisOrButton.ts","app/states/GamepadOptionsLayout.ts","app/states/Intro.ts","app/states/KeyboardOptions.ts","app/states/KeyboardOptionsBindKey.ts","app/states/Level.ts","app/states/Options.ts","app/states/TeamSelectScreen.ts","app/states/Title.ts","app/ui/MenuButton.ts","app/ui/MenuSelect.ts","app/utils/CollisionResolver.ts","app/utils/Controls.ts"],"names":[],"mappings":"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","file":"public/app.js","sourcesContent":["import { UnderthiefGame } from \"./UnderthiefGame\";\n\nnew UnderthiefGame();","/// <reference path=\"../typings/phaser.d.ts\"/>\nimport {Intro} from \"./states/Intro\";\nimport {Title} from \"./states/Title\";\nimport {Options} from \"./states/Options\";\nimport {KeyboardOptions} from \"./states/KeyboardOptions\";\nimport {KeyboardOptionsBindKey} from \"./states/KeyboardOptionsBindKey\";\nimport {GamepadOptions} from \"./states/GamepadOptions\";\nimport {GamepadOptionsLayout} from \"./states/GamepadOptionsLayout\";\nimport {GamepadOptionsBindAxisOrButton} from \"./states/GamepadOptionsBindAxisOrButton\";\nimport {TeamSelectScreen} from \"./states/TeamSelectScreen\";\nimport {Level} from \"./states/Level\";\nimport {Controllers} from \"./utils/Controls\";\n\nexport class UnderthiefGame extends Phaser.Game {\n\n    controllers: Controllers;\n\n    constructor() {\n        super(1280, 720, Phaser.CANVAS, 'game', {\n            preload: () => this.preloadGame()\n            , create: () => this.createGame()\n        });\n        this.state.add('Intro', Intro);\n        this.state.add('Title', Title);\n        this.state.add('Options', Options);\n        this.state.add('GamepadOptionsLayout', GamepadOptionsLayout);\n        this.state.add('GamepadOptionsBindAxis', GamepadOptionsBindAxisOrButton);\n        this.state.add('KeyboardOptions', KeyboardOptions);\n        this.state.add('KeyboardOptionsBindKey', KeyboardOptionsBindKey);\n        this.state.add('GamepadOptions', GamepadOptions);\n        this.state.add('TeamSelectScreen', TeamSelectScreen);\n        this.state.add('Level', Level);\n    }\n\n    preloadGame() {\n        this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n        this.scale.fullScreenScaleMode = Phaser.ScaleManager.SHOW_ALL;\n        this.scale.pageAlignHorizontally = true;\n        this.scale.pageAlignVertically = true;\n    }\n\n    createGame() {\n        this.controllers = new Controllers(this);\n        this.state.start('Title');\n    }\n\n    addSpriteAnimation(sprite: Phaser.Sprite, animationName: string, frameCount: number): Phaser.Animation {\n        return sprite.animations.add(animationName, this.genAnimArray(animationName, frameCount));\n    }\n\n    private genAnimArray(name: string, n: number) {\n        let result = new Array<string>();\n        for (let i = 0; i < n; ++i) {\n            result.push(name + i);\n        }\n        return result;\n    }\n\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport { UnderthiefGame } from \"../UnderthiefGame\";\nimport { AbstractControls } from \"../utils/Controls\";\n\ninterface PlayerState {\n    update(player: Player);\n}\n\nclass PlayerDashState implements PlayerState {\n\n    dashSteps = 3;\n\n    constructor(player: Player) {\n        if (Math.abs(player.body.velocity.y) > Math.abs(player.body.velocity.x)) {\n            if (player.body.velocity.y < 0) {\n                player.play(\"player.dash.back\", 8, false);\n            } else {\n                player.play(\"player.dash.front\", 8, false);\n            }\n        } else {\n            if (player.body.velocity.x < 0) {\n                player.play(\"player.dash.left\", 8, false);\n            } else {\n                player.play(\"player.dash.right\", 8, false);\n            }\n        }\n    }\n\n    update(player: Player) {\n        --this.dashSteps;\n        if (this.dashSteps <= 0) {\n            player.body.velocity.x = 0;\n            player.body.velocity.y = 0;\n            if (this.dashSteps <= -10) {\n                player.dashCoolDown = 30;\n                player.state = Player.RUNNING_STATE;\n            }\n        }\n    }\n}\n\nclass PlayerHammeredState implements PlayerState {\n\n    steps = 60;\n\n    update(player: Player) {\n        this.steps--;\n        if (this.steps <= 0) {\n            player.body.velocity.x = 0;\n            player.body.velocity.y = 0;\n            player.state = Player.RUNNING_STATE;\n        } else {\n            player.play(\"player.hammered\", 8, false);\n        }\n    }\n}\n\nclass PlayerRunningState implements PlayerState {\n    update(player: Player) {\n        player.hammerTime = false;\n        --player.dashCoolDown;\n        if (!player.oldPos.equals(player.position)) {\n            player.oldPos = player.position.clone();\n        }\n        if (player.controls) {\n            player.body.velocity.x = 0;\n            player.body.velocity.y = 0;\n            let dashAngle = player.controls.dashingAngle(player.body.center);\n            if (player.dashCoolDown < 0 && null != dashAngle) {\n                player.dash(dashAngle);\n            } else if (player.controls.isHammerTime()) {\n                player.hammerTime = true;\n                player.play(\"player.hammertime\", 8, false);\n            } else {\n                if (player.controls.isGoingLeft()) {\n                    player.body.velocity.x = -300;\n                } else if (player.controls.isGoingRight()) {\n                    player.body.velocity.x = 300;\n                }\n\n                if (player.controls.isGoingUp()) {\n                    player.body.velocity.y = -300;\n                } else if (player.controls.isGoingDown()) {\n                    player.body.velocity.y = 300;\n                }\n\n                if (player.body.velocity.y < 0) {\n                    player.play(\"player.walk.back\", 8, false);\n                } else if (player.body.velocity.y > 0) {\n                    player.play(\"player.walk.front\", 8, false);\n                } else if (player.body.velocity.x < 0) {\n                    player.play(\"player.walk.left\", 8, false);\n                } else if (player.body.velocity.x > 0) {\n                    player.play(\"player.walk.right\", 8, false);\n                } else {\n                    player.play(\"player.wait\", 8, false);\n                }\n            }\n        }\n\n    }\n}\n\n\nexport class Player extends Phaser.Sprite {\n\n    controls: AbstractControls;\n    state: PlayerState;\n    hammerTime = false;\n    dashCoolDown = 0;\n    static RUNNING_STATE = new PlayerRunningState();\n\n    constructor(game: Phaser.Game, key: string) {\n        super(game, game.world.centerX, game.world.centerY, key);\n        this.health = 3;\n        (<UnderthiefGame>game).addSpriteAnimation(this, 'player.walk.back', 4);\n        (<UnderthiefGame>game).addSpriteAnimation(this, 'player.walk.front', 4);\n        (<UnderthiefGame>game).addSpriteAnimation(this, 'player.walk.left', 4);\n        (<UnderthiefGame>game).addSpriteAnimation(this, 'player.walk.right', 4);\n        (<UnderthiefGame>game).addSpriteAnimation(this, 'player.dash.back', 1);\n        (<UnderthiefGame>game).addSpriteAnimation(this, 'player.dash.front', 1);\n        (<UnderthiefGame>game).addSpriteAnimation(this, 'player.dash.left', 1);\n        (<UnderthiefGame>game).addSpriteAnimation(this, 'player.dash.right', 1);\n        (<UnderthiefGame>game).addSpriteAnimation(this, 'player.hammertime', 4);\n        (<UnderthiefGame>game).addSpriteAnimation(this, 'player.hammered', 4);\n        (<UnderthiefGame>game).addSpriteAnimation(this, 'player.wait', 1);\n\n        this.play(\"player.wait\", 8, false);\n        this.anchor.setTo(0.5, 0.5);\n        this.game.physics.enable(this, Phaser.Physics.ARCADE);\n        this.body.setCircle(24);\n        this.body.collideWorldBounds = true;\n        this.game.add.existing(this);\n        this.state = Player.RUNNING_STATE;\n    }\n\n    static preload(game: Phaser.Game) {\n        game.load.atlasXML('betty', 'sprites/opengameart/betty.png', 'sprites/opengameart/player.xml');\n        game.load.atlasXML('betty2', 'sprites/opengameart/betty2.png', 'sprites/opengameart/player.xml');\n        game.load.atlasXML('george', 'sprites/opengameart/george.png', 'sprites/opengameart/player.xml');\n        game.load.atlasXML('george2', 'sprites/opengameart/george2.png', 'sprites/opengameart/player.xml');\n    }\n\n    oldPos = new Phaser.Point(0, 0);\n\n    update() {\n        super.update()\n        this.state.update(this);\n    }\n\n    dash(angle: number) {\n        if (!(this.state instanceof PlayerDashState)) {\n            this.game.physics.arcade.velocityFromRotation(angle, 1200, this.body.velocity);\n            this.state = new PlayerDashState(this);\n        }\n    }\n\n    hammer(other: Player) {\n        if (!(other.state instanceof PlayerHammeredState)) {\n            other.state = new PlayerHammeredState();\n            let angle = Phaser.Math.angleBetweenPoints(this.body.center, other.body.center);\n            this.game.physics.arcade.velocityFromRotation(angle, 300, other.body.velocity);\n        }\n    }\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport { Player } from \"./Player\";\nimport { CollisionResolver } from \"../utils/CollisionResolver\";\n\nexport class Team extends Phaser.Group {\n    constructor(game: Phaser.Game) {\n        super(game);\n    }\n}\n\nexport class TeamCollisionResolver extends CollisionResolver {\n    constructor(game: Phaser.Game) {\n        super(game);\n    }\n\n    onCollide(sa: Phaser.Sprite, sb: Phaser.Sprite) {\n        let a = <Player>sa;\n        let b = <Player>sb;\n        if (a.hammerTime) {\n            a.hammer(b);\n        }\n        if (b.hammerTime) {\n            b.hammer(a);\n        }\n    }\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport { UnderthiefGame } from \"../UnderthiefGame\";\nimport { AbstractControls } from \"../utils/Controls\";\nimport { CollisionResolver } from \"../utils/CollisionResolver\";\n\nexport class Underwear extends Phaser.Sprite {\n\n    constructor(game: Phaser.Game, key: string) {\n        super(game, game.world.centerX, game.world.centerY, key);\n        this.health = 3;\n        (<UnderthiefGame>game).addSpriteAnimation(this, 'underwear.moving', 1);\n\n        this.play(\"underwear.moving\", 8, false);\n        this.anchor.setTo(0.5, 0.5);\n        this.game.physics.enable(this, Phaser.Physics.ARCADE);\n        this.body.setCircle(32);\n        this.body.collideWorldBounds = true;\n        this.body.bounce.x = 0.8;\n        this.body.bounce.y = 0.8;\n    }\n\n    static preload(game: Phaser.Game) {\n        game.load.atlasXML('bra', 'sprites/devnewton/bra.png', 'sprites/devnewton/underwear.xml');\n        game.load.atlasXML('boxers', 'sprites/devnewton/boxers.png', 'sprites/devnewton/underwear.xml');\n    }\n}\n\nexport class UnderwearCapturePoint extends Phaser.Sprite {\n    containsUnderwear: boolean = false;\n\n    constructor(game: Phaser.Game, x: number, y: number) {\n        super(game, x, y);\n        this.game.physics.enable(this, Phaser.Physics.ARCADE);\n        this.body.immovable = true;\n    }\n}\n\nexport class UnderwearCapturePoints extends Phaser.Group {\n    constructor(game: Phaser.Game, map: Phaser.Tilemap, key: string) {\n        super(game);\n        for (let o of map.objects[key + '-capture-points']) {\n            if (o.rectangle) {\n                const capturePoint = new UnderwearCapturePoint(this.game, o.x, o.y);\n                capturePoint.width = o.width;\n                capturePoint.height = o.height;\n                this.add(capturePoint);\n            }\n        }\n    }\n}\n\nexport class UnderwearCaptureCollisionResolver extends CollisionResolver {\n    constructor(game: Phaser.Game) {\n        super(game);\n    }\n\n    checkCollision(sa: Phaser.Sprite, sb: Phaser.Sprite) {\n        let a = <Underwear>sa;\n        let b = <UnderwearCapturePoint> sb;\n        return !b.containsUnderwear && a.exists && b.exists && b.body.hitTest(a.centerX, a.centerY);\n    }\n\n    onCollide(sa: Phaser.Sprite, sb: Phaser.Sprite) {\n        let a = <Underwear>sa;\n        let b = <UnderwearCapturePoint> sb;\n        a.body.enable = false;\n        a.tint = 0xAADDAA;\n        b.containsUnderwear = true;\n    }\n}","export class Tree<ME, BB extends Blackboard> {\n    root: Node<ME,BB>;\n\n    tick(me: ME, blackboard: BB) {\n        const t = new Tick(me, blackboard);\n        this.root.tick(t);\n    }\n\n    sequence(...children: Node<ME,BB>[]): Sequence<ME,BB> {\n        return new Sequence<ME,BB>(...children);\n    }\n\n    selector(...children: Node<ME,BB>[]): Sequence<ME,BB> {\n        return new Selector<ME,BB>(...children);\n    }\n\n    parallel(...children: Node<ME,BB>[]): Sequence<ME,BB> {\n        return new Parallel<ME,BB>(...children);\n    }\n}\n\nexport class BlackboardKey<T> {\n    id = Symbol();\n}\n\nexport class Blackboard {\n    data = {};\n    \n    get<T>(k: BlackboardKey<T>): T {\n        return <T>this.data[k.id];\n    }\n    set<T>(k: BlackboardKey<T>, value: T) {\n        this.data[k.id] = value;\n    }\n    reset() {\n        this.data = {};\n    }\n}\n\nexport class Tick<ME, BB> {\n    me: ME;\n    blackboard: BB;\n\n    constructor(me: ME, b: BB) {\n        this.blackboard = b;\n        this.me = me;\n    }\n}\n\nexport enum NodeState {\n    SUCCESS, FAILURE, RUNNING\n}\n\nexport abstract class Node<ME,BB> {\n\n    abstract tick(t: Tick<ME,BB>): NodeState;\n}\n\n\nexport abstract class Branch<ME,BB> extends Node<ME,BB> {\n    children: Node<ME,BB>[];\n    constructor(...children: Node<ME,BB>[]) {\n        super();\n        this.children = children;\n    }\n\n}\n\nexport abstract class Leaf<ME,BB> extends Node<ME,BB> {\n\n}\n\nexport class Selector<ME,BB> extends Branch<ME,BB> {\n\n    constructor(...children: Node<ME,BB>[]) {\n        super(...children);\n    }\n    tick(t: Tick<ME,BB>): NodeState {\n        for (let c of this.children) {\n            switch (c.tick(t)) {\n                case NodeState.SUCCESS:\n                    return NodeState.SUCCESS;\n                case NodeState.RUNNING:\n                    return NodeState.RUNNING;\n            }\n        }\n        return NodeState.FAILURE;\n    }\n}\n\nexport class Sequence<ME,BB> extends Branch<ME,BB> {\n\n    constructor(...children: Node<ME,BB>[]) {\n        super(...children);\n    }\n    tick(t: Tick<ME,BB>): NodeState {\n        for (let c of this.children) {\n            switch (c.tick(t)) {\n                case NodeState.FAILURE:\n                    return NodeState.FAILURE;\n                case NodeState.RUNNING:\n                    return NodeState.RUNNING;\n            }\n        }\n        return NodeState.SUCCESS;\n    }\n}\n\nexport class Parallel<ME,BB> extends Branch<ME,BB> {\n    successThreshold: number;\n    failureThreshold: number;\n\n    constructor(...children: Node<ME,BB>[]) {\n        super(...children);\n    }\n\n    tick(t: Tick<ME,BB>): NodeState {\n        let failures = 0, successes = 0;\n        for (let c of this.children) {\n            switch (c.tick(t)) {\n                case NodeState.FAILURE:\n                    return ++failures;\n                case NodeState.SUCCESS:\n                    return ++successes;\n            }\n        }\n        if (successes >= this.successThreshold) {\n            return NodeState.SUCCESS;\n        } else if (failures >= this.failureThreshold) {\n            return NodeState.FAILURE;\n        } else {\n            return NodeState.RUNNING;\n        }\n    }\n}\n\nexport abstract class Decorator<ME,BB> extends Node<ME,BB> {\n    child: Node<ME,BB>;\n\n    constructor(child: Node<ME,BB>) {\n        super();\n        this.child = child;\n    }\n}\n\nexport abstract class Action<ME,BB> extends Leaf<ME,BB> {\n\n}\n\nexport abstract class Condition<ME,BB> extends Leaf<ME,BB> {\n\n    abstract check(t: Tick<ME,BB>): boolean;\n\n    tick(t: Tick<ME,BB>): NodeState {\n        if (this.check(t)) {\n            return NodeState.SUCCESS;\n        } else {\n            return NodeState.FAILURE;\n        }\n    }\n}\n","/// <reference path=\"../../../typings/easystarjs.d.ts\" />\n/// <reference path=\"../../../typings/brunch-require.d.ts\" />\nimport EasyStar = require('easystarjs');\n\nexport class Pathfinder {\n\n    private easystar: EasyStar.js;\n    private map: Phaser.Tilemap;\n\n    constructor(map: Phaser.Tilemap) {\n        this.map = map;\n        const pathfindLayer = map.getLayerIndex('pathfind');\n        const grid = new Array<Array<number>>();\n        for (let row = 0; row < map.height; ++row) {\n            var gridRow = new Array<number>(map.width);\n            for (let column = 0; column < map.width; ++column) {\n                const tile = map.getTile(column, row, pathfindLayer);\n                gridRow[column] = this.isTileWalkable(tile) ? 1 : 0;\n            }\n            grid[row] = gridRow;\n        }\n        this.easystar = new EasyStar.js();\n        this.easystar.setGrid(grid);\n        this.easystar.enableDiagonals();\n        this.easystar.setAcceptableTiles([1]);\n    }\n\n    randomWalkablePos(): Phaser.Point {\n        const pathfindLayer = this.map.getLayerIndex('pathfind');\n        const rnd = this.map.game.rnd;\n        const maxChances = this.map.width * this.map.height;\n        for (let i = 0; i < maxChances; ++i) {\n            const x = rnd.integerInRange(0, this.map.width - 1);\n            const y = rnd.integerInRange(0, this.map.height - 1);\n            const tile = this.map.getTile(x, y, pathfindLayer);\n            if (this.isTileWalkable(tile)) {\n                return new Phaser.Point(tile.worldX, tile.worldY);\n            }\n        }\n        return null;\n    }\n\n    isTileWalkable(tile: Phaser.Tile) {\n        return tile && tile.properties['walkable'] == 1;\n    }\n\n    findPath(startX: number, startY: number, endX: number, endY: number, callback: (path: Phaser.Point[]) => void) {\n        const tileStart = this.map.getTileWorldXY(startX, startY);\n        const tileEnd = this.findNearestWalkableTile(endX, endY);\n        if (!tileStart) {\n            console.log('cannot find path starting out of the map: (' + startX + ';' + startY + ')');\n            return;\n        }\n        if (tileEnd) {\n            this.easystar.findPath(tileStart.x, tileStart.y, tileEnd.x, tileEnd.y, (path: { x: number, y: number }[]) => {\n                let worldPath: Array<Phaser.Point>;\n                if (path && path.length > 1) {\n                    worldPath = new Array<Phaser.Point>(path.length - 1);\n                    for (let i = 1; i < path.length; ++i) {\n                        const tile = this.map.getTile(path[i].x, path[i].y);\n                        worldPath[i - 1] = new Phaser.Point(tile.worldX + tile.width / 2, tile.worldY + tile.height / 2);\n                    }\n                } else {\n                    worldPath = new Array<Phaser.Point>();\n                }\n                callback(worldPath);\n            });\n        } else {\n            callback(new Array<Phaser.Point>());\n        }\n    }\n    findNearestWalkableTile(endX: number, endY: number) {\n        const pathfindLayer = this.map.getLayerIndex('pathfind');\n        const tile = this.map.getTileWorldXY(endX, endY, this.map.tileWidth, this.map.tileHeight, pathfindLayer);\n        if (this.isTileWalkable(tile)) {\n            return tile;\n        }\n        let minTile = null;\n        let minTileDistance = null;\n        for (let dx = -10; dx < 10; ++dx) {\n            for (let dy = -10; dy < 10; ++dy) {\n                const t = this.map.getTile(tile.x + dx, tile.y + dy, pathfindLayer);\n                if (this.isTileWalkable(t)) {\n                    const tileDistance = Phaser.Math.distanceSq(0, 0, dx, dy);\n                    if (!minTileDistance || tileDistance < minTileDistance) {\n                        minTileDistance = tileDistance;\n                        minTile = t;\n                    }\n                }\n            }\n        }\n        return minTile;\n    }\n    update() {\n        this.easystar.calculate();\n    }\n\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nexport abstract class AbstractState extends Phaser.State {\n\n    constructor() {\n        super();\n    }\n\n    create() {\n        this.game.input.keyboard.addKey(Phaser.Keyboard.F11).onDown.add(() => this.toggleFullscreen());\n    }\n\n    toggleFullscreen() {\n        if (this.game.scale.isFullScreen) {\n            this.game.scale.stopFullScreen();\n        } else {\n            this.game.scale.startFullScreen();\n        }\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {AbstractState} from \"./AbstractState\";\nimport {MenuButton} from \"../ui/MenuButton\";\n\nexport class GamepadOptions extends AbstractState {\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        MenuButton.preload(this.game);\n    }\n\n    create() {\n        super.create();\n        let title = this.game.add.text(this.game.world.centerX, 0, 'Choose gamepad', { font: \"42px monospace\", fill: 'white' });\n        title.scale.x = 2;\n        title.scale.y = 2;\n        title.anchor.setTo(0.5, 0);\n\n        let subtitle = this.game.add.text(0, 0, 'Move stick or press button to show gamepad number', { font: \"32px monospace\", fill: 'white' });\n        subtitle.y = this.game.world.height - subtitle.height;\n\n        new GamepadMenuButton(this.input.gamepad.pad1, 0xFF6666, \"Gamepad 1\", 200, 100, () => {\n            this.game.state.start('GamepadOptionsLayout', true, false, 1);\n        });\n        new GamepadMenuButton(this.input.gamepad.pad2, 0x66FF66, \"Gamepad 2\", 200, 200, () => {\n            this.game.state.start('GamepadOptionsLayout', true, false, 2);\n        });\n        new GamepadMenuButton(this.input.gamepad.pad3, 0x6666FF, \"Gamepad 3\", 200, 300, () => {\n            this.game.state.start('GamepadOptionsLayout', true, false, 3);\n        });\n        new GamepadMenuButton(this.input.gamepad.pad4, 0xFFFF66, \"Gamepad 4\", 200, 400, () => {\n            this.game.state.start('GamepadOptionsLayout', true, false, 4);\n        });\n        new MenuButton(this.game, \"Back\", 200, 550, () => this.game.state.start('Options'));\n    }\n}\n\nclass GamepadMenuButton extends MenuButton {\n    pad: Phaser.SinglePad;\n    activePadTint: number;\n    constructor(pad: Phaser.SinglePad, activePadTint: number, label: string, x: number, y: number, callback: Function) {\n        super(pad.game, label, x, y, callback);\n        this.pad = pad;\n        this.activePadTint = activePadTint;\n    }\n\n    update() {\n        super.update();\n\n        if (this.isPadActive()) {\n            this.tint = this.activePadTint;\n        } else {\n            this.tint = 0xFFFFFF;\n        }\n    }\n\n    isPadActive(): boolean {\n        for (let b = 0; b < 16; ++b) {\n            let button = this.pad.getButton(b);\n            if (button && button.isDown) {\n                return true;\n            }\n        }\n        for (let a = 0; a < 16; ++a) {\n            if (Math.abs(this.pad.axis(a)) > this.pad.deadZone) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport { AbstractState } from \"./AbstractState\";\nimport { MenuButton } from \"../ui/MenuButton\";\nimport { UnderthiefGame } from \"../UnderthiefGame\";\n\nexport class GamepadOptionsBindAxisOrButton extends AbstractState {\n\n    bindings = [\n        { label: 'Pull move X axis', localStorageKeySuffix: 'moveXAxis' },\n        { label: 'Pull move Y axis', localStorageKeySuffix: 'moveYAxis' },\n        { label: 'Press hammer button', localStorageKeySuffix: 'hammerButton' },\n        { label: 'Press shoot button', localStorageKeySuffix: 'shootButton' },\n        { label: 'Press dash button', localStorageKeySuffix: 'dashButton' }\n    ];\n\n    currentBinding: number = 0;\n    pad: Phaser.SinglePad;\n    padIndex = 1;\n    waitForNoInput: number;\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        MenuButton.preload(this.game);\n    }\n\n    init(padIndex: number, binding: number = 0) {\n        padIndex = padIndex || 1;\n        this.padIndex = 1;\n        this.pad = this.input.gamepad['pad' + this.padIndex];\n        if (binding >= this.bindings.length) {\n            this.currentBinding = 0;\n            (this.game as UnderthiefGame).controllers.getPad(this.padIndex).useCustomGamepadLayout(padIndex);\n            this.game.state.start('GamepadOptions');\n        } else {\n            this.currentBinding = binding;\n        }\n        this.waitForNoInput = 60;\n    }\n\n    create() {\n        super.create();\n        let logo = this.game.add.text(this.game.world.centerX, 0, this.bindings[this.currentBinding].label, { font: \"42px monospace\", fill: 'white' });\n        logo.scale.x = 2;\n        logo.scale.y = 2;\n        logo.anchor.setTo(0.5, 0);\n        new MenuButton(this.game, \"Back\", 200, 500, () => this.game.state.start('GamepadOptions'));\n    }\n\n    update() {\n        super.update();\n\n        if (this.bindings[this.currentBinding].localStorageKeySuffix.match(/axis/gi)) {\n            this.detectAxis();\n        } else {\n            this.detectButton();\n        }\n    }\n\n    detectAxis() {\n        let activationZone = Math.max(0.99, Math.min(0.8, 4 * this.pad.deadZone));\n        for (var k in Phaser.Gamepad) {\n            if (k.startsWith('AXIS_')) {\n                let axisCode = Phaser.Gamepad[k];\n                if (Math.abs(this.pad.axis(axisCode)) >= activationZone) {\n                    if (this.waitForNoInput > 0) {\n                        return;\n                    } else {\n                        localStorage.setItem('gamepad' + this.padIndex + '.layout.custom.' + this.bindings[this.currentBinding].localStorageKeySuffix, axisCode);\n                        this.game.state.start('GamepadOptionsBindAxis', true, false, this.padIndex, this.currentBinding + 1);\n                        return;\n                    }\n                }\n            }\n        }\n        this.waitForNoInput--;\n    }\n\n    detectButton() {\n        let activationZone = Math.max(0.99, Math.min(0.8, 4 * this.pad.deadZone));\n        for (var k in Phaser.Gamepad) {\n            if (k.startsWith('BUTTON_')) {\n                let buttonCode = Phaser.Gamepad[k];\n                if (Math.abs(this.pad.buttonValue(buttonCode)) >= activationZone) {\n                    if (this.waitForNoInput > 0) {\n                        return;\n                    } else {\n                        localStorage.setItem('gamepad' + this.padIndex + '.layout.custom.' + this.bindings[this.currentBinding].localStorageKeySuffix, buttonCode);\n                        this.game.state.start('GamepadOptionsBindAxis', true, false, this.padIndex, this.currentBinding + 1);\n                        return;\n                    }\n                }\n            }\n        }\n        this.waitForNoInput--;\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {AbstractState} from \"./AbstractState\";\nimport {MenuButton} from \"../ui/MenuButton\";\nimport {UnderthiefGame} from \"../UnderthiefGame\";\n\nexport class GamepadOptionsLayout extends AbstractState {\n    padIndex: number;\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        MenuButton.preload(this.game);\n    }\n\n    init(padIndex : number) {\n        this.padIndex = padIndex || 1;\n    }\n\n    create() {\n        super.create();\n        let title = this.game.add.text(this.game.world.centerX, 0, 'Choose gamepad layout', { font: \"42px monospace\", fill: 'white' });\n        title.scale.x = 2;\n        title.scale.y = 2;\n        title.anchor.setTo(0.5, 0);\n\n        new MenuButton(this.game, \"Xbox\", 200, 200, () => {\n            (this.game as UnderthiefGame).controllers.getPad(this.padIndex).useXboxLayout(this.padIndex);\n            this.game.state.start('Options');\n        });\n        new MenuButton(this.game, \"Custom\", 200, 300, () => {\n            this.game.state.start('GamepadOptionsBindAxis', true, false, this.padIndex);\n        });\n        new MenuButton(this.game, \"Back\", 200, 500, () => this.game.state.start('Options'));\n    }\n}\n\nclass GamepadMenuButton extends MenuButton {\n    pad: Phaser.SinglePad;\n    activePadTint: number;\n    constructor(pad: Phaser.SinglePad, activePadTint: number, label: string, x: number, y: number, callback: Function) {\n        super(pad.game, label, x, y, callback);\n        this.pad = pad;\n        this.activePadTint = activePadTint;\n    }\n\n    update() {\n        super.update();\n\n        if (this.isPadActive()) {\n            this.tint = this.activePadTint;\n        } else {\n            this.tint = 0xFFFFFF;\n        }\n    }\n\n    isPadActive(): boolean {\n        for (let b = 0; b < 16; ++b) {\n            let button = this.pad.getButton(b);\n            if (button && button.isDown) {\n                return true;\n            }\n        }\n        for (let a = 0; a < 16; ++a) {\n            if (Math.abs(this.pad.axis(a)) > this.pad.deadZone) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport { AbstractState } from \"./AbstractState\"; // you import only AClass\n\nexport class Intro extends AbstractState {\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        this.game.load.video('intro', 'intro/intro.webm');\n    }\n\n    create() {\n        super.create();\n        var video = this.game.add.video('intro');\n        video.play();\n        video.addToWorld(this.game.world.centerX, this.game.world.centerY, 0.5, 0.5);\n        video.onComplete.add(() => this.game.state.start('Title'));\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {AbstractState} from \"./AbstractState\";\nimport {MenuButton} from \"../ui/MenuButton\";\nimport { UnderthiefGame } from \"../UnderthiefGame\";\n\n\nexport class KeyboardOptions extends AbstractState {\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        MenuButton.preload(this.game);\n    }\n\n    create() {\n        super.create();\n        let logo = this.game.add.text(this.game.world.centerX, 0, 'Choose keyboard layout',{font: \"42px monospace\", fill: 'white'});\n        logo.scale.x = 2;\n        logo.scale.y = 2;\n        logo.anchor.setTo(0.5, 0);\n\n        new MenuButton(this.game, \"Azerty zsqd hjk\", 200, 100, () => {\n            (<UnderthiefGame>this.game).controllers.getKeyboard().useAzertyLayout();\n            this.game.state.start('Options');\n        });\n        new MenuButton(this.game, \"Qwerty wsad hjk\", 200, 200, () => {\n            (<UnderthiefGame>this.game).controllers.getKeyboard().useQwertyLayout();\n            this.game.state.start('Options');\n        });\n        new MenuButton(this.game, \"Others  \", 200, 300, () => {\n            (<UnderthiefGame>this.game).controllers.getKeyboard().useOtherKeyboardLayout();\n            this.game.state.start('Options');\n        });\n        new MenuButton(this.game, \"Custom\", 200, 400, () => {\n            (<UnderthiefGame>this.game).controllers.getKeyboard().useOtherKeyboardLayout();\n            this.game.state.start('KeyboardOptionsBindKey', true, false);\n        });\n        new MenuButton(this.game, \"Back\", 200, 600, () => this.game.state.start('Options'));\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport { AbstractState } from \"./AbstractState\";\nimport { MenuButton } from \"../ui/MenuButton\";\nimport { UnderthiefGame } from \"../UnderthiefGame\";\n\n\nexport class KeyboardOptionsBindKey extends AbstractState {\n\n    bindings = [\n        { label: 'Press move up key', localStorageKey: 'keyboard.layout.custom.moveUp' },\n        { label: 'Press move down key', localStorageKey: 'keyboard.layout.custom.moveDown' },\n        { label: 'Press move left key', localStorageKey: 'keyboard.layout.custom.moveLeft' },\n        { label: 'Press move right key', localStorageKey: 'keyboard.layout.custom.moveRight' },\n        { label: 'Press hammer key', localStorageKey: 'keyboard.layout.custom.hammer' },\n        { label: 'Press shoot key', localStorageKey: 'keyboard.layout.custom.shoot' },\n        { label: 'Press dash key', localStorageKey: 'keyboard.layout.custom.dash' }\n    ];\n\n    currentBinding: number = 0;\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        MenuButton.preload(this.game);\n    }\n\n    init(binding: number = 0) {\n        if (binding >= this.bindings.length) {\n            this.currentBinding = 0;\n            (this.game as UnderthiefGame).controllers.getKeyboard().useCustomKeyboardLayout();\n            this.game.state.start('KeyboardOptions');\n        } else {\n            this.currentBinding = binding;\n        }\n    }\n\n    create() {\n        super.create();\n        let logo = this.game.add.text(this.game.world.centerX, 0, this.bindings[this.currentBinding].label, { font: \"42px monospace\", fill: 'white' });\n        logo.scale.x = 2;\n        logo.scale.y = 2;\n        logo.anchor.setTo(0.5, 0);\n        new MenuButton(this.game, \"Back\", 200, 600, () => this.game.state.start('KeyboardOptions'));\n    }\n\n    update() {\n        for (var k in Phaser.KeyCode) {\n            let keycode = Phaser.KeyCode[k];\n            if (this.input.keyboard.isDown(keycode)) {\n                localStorage.setItem(this.bindings[this.currentBinding].localStorageKey, keycode);\n                this.game.state.start('KeyboardOptionsBindKey', true, false, this.currentBinding + 1);\n                break;\n            }\n        }\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport { AbstractState } from \"./AbstractState\";\nimport { UnderthiefGame } from \"../UnderthiefGame\";\nimport { Player } from \"../entities/Player\";\nimport { Underwear, UnderwearCapturePoints, UnderwearCaptureCollisionResolver } from \"../entities/Underwear\";\nimport { Team, TeamCollisionResolver } from \"../entities/Team\";\n\nimport { Pathfinder } from \"../ia/services/Pathfinder\";\n\nimport { ControllerType } from \"../utils/Controls\";\n\nexport class LevelConfig {\n    bettyController: ControllerType;\n    betty2Controller: ControllerType;\n    georgeController: ControllerType;\n    george2Controller: ControllerType;\n}\n\nexport class Level extends AbstractState {\n\n    config: LevelConfig;\n    collisionSprites: Phaser.Group;\n    pathfinder: Pathfinder;\n    leftTeam: Team;\n    rightTeam: Team;\n    braGroup: Phaser.Group;\n    boxersGroup: Phaser.Group;\n    teamCollisionResolver: TeamCollisionResolver;\n    braCapturePoints: UnderwearCapturePoints;\n    boxersCapturePoints: UnderwearCapturePoints;\n    underwearCaptureCollisionResolver: UnderwearCaptureCollisionResolver;\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        Player.preload(this.game);\n        Underwear.preload(this.game);\n        this.game.load.tilemap('map', 'levels/level1.json', null, Phaser.Tilemap.TILED_JSON);\n        this.game.load.image('interior', 'sprites/opengameart/LPC_house_interior/interior.png');\n        this.game.load.image('arabic1', 'sprites/opengameart/arabic_set/arabic1.png');\n        this.game.load.image('house_inside', 'sprites/opengameart/house_inside.png');\n        this.game.load.image('misc', 'sprites/opengameart/misc.png');\n    }\n\n    init(config: LevelConfig) {\n        this.config = config;\n    }\n\n    create() {\n        super.create();\n        this.game.physics.startSystem(Phaser.Physics.ARCADE);\n        const map = this.game.add.tilemap('map');\n        map.addTilesetImage('interior');\n        map.addTilesetImage('arabic1');\n        map.addTilesetImage('house_inside');\n        map.addTilesetImage('misc');\n\n        const layer = map.createLayer('ground');\n        map.createLayer('doors_and_furnitures');\n        layer.resizeWorld();\n\n        this.collisionSprites = this.game.add.physicsGroup(Phaser.Physics.ARCADE);\n        for (let o of map.objects['collision']) {\n            if (o.rectangle) {\n                const sprite = this.game.add.sprite(o.x, o.y);\n                this.game.physics.enable(sprite, Phaser.Physics.ARCADE);\n                sprite.body.immovable = true;\n                sprite.width = o.width;\n                sprite.height = o.height;\n                this.collisionSprites.add(sprite);\n            }\n        }\n\n        this.braCapturePoints = new UnderwearCapturePoints(this.game, map, 'bra');\n        this.boxersCapturePoints = new UnderwearCapturePoints(this.game, map, 'boxers');\n        this.underwearCaptureCollisionResolver = new UnderwearCaptureCollisionResolver(this.game);\n\n        this.pathfinder = new Pathfinder(map);\n\n        let controllers = (this.game as UnderthiefGame).controllers;\n\n        this.leftTeam = new Team(this.game);\n        let betty = new Player(this.game, 'betty');\n        betty.x = 256;\n        betty.y = 320;\n        betty.controls = controllers.getController(this.config.bettyController);\n        this.leftTeam.add(betty);\n\n        let betty2 = new Player(this.game, 'betty2');\n        betty2.x = 256;\n        betty2.y = 480;\n        betty2.controls = controllers.getController(this.config.betty2Controller);\n        this.leftTeam.add(betty2);\n\n        this.braGroup = this.game.add.physicsGroup(Phaser.Physics.ARCADE);\n\n        let bra1 = new Underwear(this.game, 'bra');\n        bra1.x = 512;\n        bra1.y = 240;\n        this.braGroup.add(bra1);\n\n        let bra2 = new Underwear(this.game, 'bra');\n        bra2.x = 512;\n        bra2.y = 400;\n        this.braGroup.add(bra2);\n\n        let bra3 = new Underwear(this.game, 'bra');\n        bra3.x = 512;\n        bra3.y = 560;\n        this.braGroup.add(bra3);\n\n        this.rightTeam = new Team(this.game);\n        let george = new Player(this.game, 'george');\n        george.x = 1024;\n        george.y = 320;\n        george.controls = controllers.getController(this.config.georgeController);\n        this.rightTeam.add(george);\n\n        let george2 = new Player(this.game, 'george2');\n        george2.x = 1024;\n        george2.y = 480;\n        george2.controls = controllers.getController(this.config.george2Controller);\n        this.rightTeam.add(george2);\n\n        this.boxersGroup = this.game.add.physicsGroup(Phaser.Physics.ARCADE);\n\n        let boxers1 = new Underwear(this.game, 'boxers');\n        boxers1.x = 768;\n        boxers1.y = 240;\n        this.boxersGroup.add(boxers1);\n\n        let boxers2 = new Underwear(this.game, 'boxers');\n        boxers2.x = 768;\n        boxers2.y = 400;\n        this.boxersGroup.add(boxers2);\n\n        let boxers3 = new Underwear(this.game, 'boxers');\n        boxers3.x = 768;\n        boxers3.y = 560;\n        this.boxersGroup.add(boxers3);\n\n        this.teamCollisionResolver = new TeamCollisionResolver(this.game);\n    }\n\n    isNotFirstFrame = false;\n\n    update() {\n        if (this.isNotFirstFrame) {\n            // this.pathfinder.update();\n            this.teamCollisionResolver.groupVersusGroup(this.leftTeam, this.rightTeam);\n            this.underwearCaptureCollisionResolver.groupVersusGroup(this.braGroup, this.braCapturePoints);\n            this.underwearCaptureCollisionResolver.groupVersusGroup(this.boxersGroup, this.boxersCapturePoints);\n            this.game.physics.arcade.collide(this.braGroup);\n            this.game.physics.arcade.collide(this.boxersGroup);\n            this.game.physics.arcade.collide(this.braGroup, this.boxersGroup);\n            this.game.physics.arcade.collide(this.braGroup, this.leftTeam);\n            this.game.physics.arcade.collide(this.boxersGroup, this.leftTeam);\n            this.game.physics.arcade.collide(this.braGroup, this.rightTeam);\n            this.game.physics.arcade.collide(this.boxersGroup, this.rightTeam);\n            this.game.physics.arcade.collide(this.leftTeam, this.collisionSprites);\n            this.game.physics.arcade.collide(this.rightTeam, this.collisionSprites);\n            this.game.physics.arcade.collide(this.braGroup, this.collisionSprites);\n            this.game.physics.arcade.collide(this.boxersGroup, this.collisionSprites);\n        } else {\n            this.isNotFirstFrame = true;\n        }\n\n    }\n\n    render() {\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport {AbstractState} from \"./AbstractState\";\nimport {MenuButton} from \"../ui/MenuButton\";\n\nexport class Options extends AbstractState {\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        MenuButton.preload(this.game);\n    }\n\n    create() {\n        super.create();\n        let logo = this.game.add.text(this.game.world.centerX, 0, 'Options', { font: \"100px monospace\", fill: 'white' });\n        logo.scale.x = 2;\n        logo.scale.y = 2;\n        logo.anchor.setTo(0.5, 0);\n\n        let y = 100;\n        new MenuButton(this.game, \"Keyboard\", 200, y += 150, () => this.game.state.start('KeyboardOptions'));\n        if (this.input.gamepad.supported) {\n            new MenuButton(this.game, \"Gamepad\", 200, y += 150, () => this.game.state.start('GamepadOptions'));\n        }\n        new MenuButton(this.game, \"Back\", 200, y += 150, () => this.game.state.start('Title'));\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport { AbstractState } from \"./AbstractState\";\nimport { LevelConfig } from \"./Level\";\nimport { MenuButton } from \"../ui/MenuButton\";\nimport { MenuSelect, MenuSelectOption } from \"../ui/MenuSelect\";\nimport { UnderthiefGame } from \"../UnderthiefGame\";\nimport { ControllerType } from \"../utils/Controls\";\n\nexport class TeamSelectScreen extends AbstractState {\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        MenuButton.preload(this.game);\n        MenuSelect.preload(this.game);\n        this.game.load.atlasXML('betty', 'sprites/opengameart/betty.png', 'sprites/opengameart/player.xml');\n        this.game.load.atlasXML('betty2', 'sprites/opengameart/betty2.png', 'sprites/opengameart/player.xml');\n        this.game.load.atlasXML('george', 'sprites/opengameart/george.png', 'sprites/opengameart/player.xml');\n        this.game.load.atlasXML('george2', 'sprites/opengameart/george2.png', 'sprites/opengameart/player.xml');\n\n    }\n\n    create() {\n        super.create();\n        let logo = this.game.add.text(this.game.world.centerX, 0, 'Team selection', { font: \"64px monospace\", fill: 'white' });\n        logo.scale.x = 2;\n        logo.scale.y = 2;\n        logo.anchor.setTo(0.5, 0);\n\n        let betty = this.add.sprite(150, 175, 'betty', 0);\n        (<UnderthiefGame>this.game).addSpriteAnimation(betty, 'player.wait', 1);\n        betty.play('player.wait', 8, true);\n\n        let betty2 = this.add.sprite(150, 275, 'betty2', 0);\n        (<UnderthiefGame>this.game).addSpriteAnimation(betty2, 'player.wait', 1);\n        betty2.play('player.wait', 8, true);\n\n        let george = this.add.sprite(1060, 375, 'george', 0);\n        (<UnderthiefGame>this.game).addSpriteAnimation(george, 'player.wait', 1);\n        george.play('player.wait', 8, true);\n\n        let george2 = this.add.sprite(1060, 475, 'george2', 0);\n        (<UnderthiefGame>this.game).addSpriteAnimation(george2, 'player.wait', 1);\n        george2.play('player.wait', 8, true);\n\n        let playerOptions = [\n            new MenuSelectOption<ControllerType>(ControllerType.CPU, 'CPU'),\n            new MenuSelectOption<ControllerType>(ControllerType.KEYBOARD, 'Keyboard'),\n            new MenuSelectOption<ControllerType>(ControllerType.PAD1, 'Pad 1'),\n            new MenuSelectOption<ControllerType>(ControllerType.PAD2, 'Pad 2'),\n            new MenuSelectOption<ControllerType>(ControllerType.PAD4, 'Pad 3'),\n            new MenuSelectOption<ControllerType>(ControllerType.PAD4, 'Pad 4')\n        ];\n\n        let bettySelect = new MenuSelect<ControllerType>(this.game, 200, 150, playerOptions);\n        let betty2Select = new MenuSelect<ControllerType>(this.game, 200, 250, playerOptions);\n        let georgeSelect = new MenuSelect<ControllerType>(this.game, 200, 350, playerOptions);\n        let george2Select = new MenuSelect<ControllerType>(this.game, 200, 450, playerOptions);\n\n        switch (this.input.gamepad.padsConnected) {\n            case 0:\n                bettySelect.setSelectedValue(ControllerType.KEYBOARD);\n                break;\n            case 1:\n                bettySelect.setSelectedValue(ControllerType.PAD1);\n                break;\n            case 2:\n                bettySelect.setSelectedValue(ControllerType.PAD1);\n                georgeSelect.setSelectedValue(ControllerType.PAD2);\n                break;\n            case 3:\n                bettySelect.setSelectedValue(ControllerType.PAD1);\n                betty2Select.setSelectedValue(ControllerType.PAD2);\n                georgeSelect.setSelectedValue(ControllerType.PAD3);\n                break;\n            default:\n                bettySelect.setSelectedValue(ControllerType.PAD1);\n                betty2Select.setSelectedValue(ControllerType.PAD2);\n                georgeSelect.setSelectedValue(ControllerType.PAD3);\n                george2Select.setSelectedValue(ControllerType.PAD4);\n                break;\n        }\n        new MenuButton(this.game, \"Play\", 200, 600, () => {\n            let config = new LevelConfig();\n            config.bettyController = bettySelect.getSelectedValue();\n            config.betty2Controller = betty2Select.getSelectedValue();\n                        config.georgeController = georgeSelect.getSelectedValue();\n                        config.george2Controller = george2Select.getSelectedValue();\n            this.game.state.start('Level', true, true, config)\n        });\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nimport { AbstractState } from \"./AbstractState\";\nimport { MenuButton } from \"../ui/MenuButton\";\n\nexport class Title extends AbstractState {\n\n    constructor() {\n        super();\n    }\n\n    preload() {\n        this.game.load.image('school', 'title/school.jpg');\n        this.game.load.image('logo', 'title/logo.png');\n        MenuButton.preload(this.game);\n    }\n\n    create() {\n        super.create();\n        this.game.add.image(0, 0, 'school');\n        let logo = this.game.add.sprite(this.game.world.centerX, 10, 'logo');\n        logo.scale.x = 1.4;\n        logo.scale.y = 1.4;\n        logo.anchor.setTo(0.5, 0);\n\n        new MenuButton(this.game, \"Start\", 200, 250, () => this.game.state.start('TeamSelectScreen'));\n        new MenuButton(this.game, \"Options\", 200, 400, () => this.game.state.start('Options'));\n        new MenuButton(this.game, \"Help\", 200, 550, () => this.game.state.start('Help'));\n    }\n}\n","/// <reference path=\"../../typings/phaser.d.ts\"/>\nexport class MenuButton extends Phaser.Button{\n\n    labelText: Phaser.Text;\n    constructor(game: Phaser.Game, label: string, x: number, y: number, callback: Function) {\n        super(game, x, y, 'menu-buttons', callback, null, 'over', 'out', 'down');\n        this.labelText = new Phaser.Text(this.game, 140, 15, label, {font: \"64px monospace\", fill: 'white'});\n        this.addChild(this.labelText);\n        game.add.existing(this);\n    }\n\n    setText(text: string) {\n        this.labelText.setText(text);\n    }\n\n    static preload(game: Phaser.Game) {\n        game.load.atlasXML('menu-buttons', 'menu/buttons.png', 'menu/buttons.xml');\n    }\n\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\n\nexport class MenuSelectOption<T> {\n    label: string;\n    value: T;\n    callback: Function;\n\n    constructor(value: T, label: string, callback?: Function) {\n        this.label = label;\n        this.value = value;\n        this.callback = callback;\n    }\n}\n\nexport class MenuSelect<T> extends Phaser.Button {\n\n    options: Array<MenuSelectOption<T>>;\n    selectedOption = 0;\n    labelText: Phaser.Text;\n    constructor(game: Phaser.Game, x: number, y: number, options: Array<MenuSelectOption<T>>) {\n        super(game, x, y, 'menu-buttons', () => this.toggle(), null, 'over', 'out', 'down');\n        this.options = options;\n        this.labelText = new Phaser.Text(this.game, 140, 15, options[0].label, { font: \"64px monospace\", fill: 'white' });\n        this.addChild(this.labelText);\n        game.add.existing(this);\n    }\n\n    toggle() {\n        this.selectedOption = (this.selectedOption + 1) % this.options.length;\n        this.labelText.setText(this.options[this.selectedOption].label);\n    }\n\n    getSelectedValue(): T {\n        return this.options[this.selectedOption].value;\n    }\n\n    setSelectedValue(optionValue: T) {\n        let foundIndex = this.options.findIndex((option: MenuSelectOption<T>) => option.value === optionValue);\n        this.selectedOption = foundIndex >= 0 ? foundIndex : 0;\n        this.labelText.setText(this.options[this.selectedOption].label);\n    }\n\n    static preload(game: Phaser.Game) {\n        game.load.atlasXML('menu-buttons', 'menu/buttons.png', 'menu/buttons.xml');\n    }\n\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\nexport class CollisionResolver {\n    game: Phaser.Game;\n\n    constructor(game: Phaser.Game) {\n        this.game = game;\n    }\n\n    groupVersusGroup(groupA: Phaser.Group, groupB: Phaser.Group) {\n        for (let spriteA of groupA.children) {\n            if (spriteA instanceof Phaser.Sprite) {\n                this.spriteVersusGroup(spriteA, groupB);\n            }\n        }\n    }\n\n    spriteVersusGroup(spriteA: Phaser.Sprite, groupB: Phaser.Group) {\n        if (spriteA.exists) {\n            for (let spriteB of groupB.children) {\n                if (spriteB instanceof Phaser.Sprite) {\n                    this.spriteVersusSprite(spriteA, spriteB);\n                }\n            }\n        }\n    }\n\n    spriteVersusSprite(spriteA: Phaser.Sprite, spriteB: Phaser.Sprite) {\n        if (this.checkCollision(spriteA, spriteB)) {\n            this.onCollide(spriteA, spriteB);\n        }\n    }\n\n    checkCollision(spriteA: Phaser.Sprite, spriteB: Phaser.Sprite) {\n        return spriteA.exists && spriteB.exists && spriteA.overlap(spriteB);\n    }\n\n    onCollide(a: Phaser.Sprite, b: Phaser.Sprite){\n        console.log('prout');\n    }\n}","/// <reference path=\"../../typings/phaser.d.ts\"/>\n\nexport enum ControllerType {\n    CPU = -1,\n    KEYBOARD,\n    PAD1,\n    PAD2,\n    PAD3,\n    PAD4\n}\n\nexport class Controllers {\n    controllers: Array<AbstractControls>;\n\n    constructor(game: Phaser.Game) {\n        this.controllers = [\n            new KeyboardControls(game),\n            new PadControls(game, 1),\n            new PadControls(game, 2),\n            new PadControls(game, 3),\n            new PadControls(game, 4),\n        ];\n    }\n\n    getController(type: ControllerType): AbstractControls {\n        switch (type) {\n            case ControllerType.CPU:\n                return null;\n            default:\n                return this.controllers[type];\n        }\n    }\n\n    getKeyboard(): KeyboardControls {\n        return this.controllers[0] as KeyboardControls;\n    }\n\n    getPad(padIndex: number): PadControls {\n        return this.controllers[padIndex] as PadControls;\n    }\n}\n\nexport abstract class AbstractControls {\n\n    abstract isGoingUp(): boolean;\n    abstract isGoingDown(): boolean;\n    abstract isGoingLeft(): boolean;\n    abstract isGoingRight(): boolean;\n    abstract isHammerTime(): boolean;\n    abstract shootingAngle(playerPos: Phaser.Point): number;\n    abstract dashingAngle(playerPos: Phaser.Point): number;\n\n    protected readNumberFromLocalStorage(key: string, defaultValue: number) {\n        let i = parseInt(localStorage.getItem(key));\n        if (isNaN(i)) {\n            return defaultValue;\n        } else {\n            return i;\n        }\n    }\n}\n\nexport class KeyboardControls extends AbstractControls {\n    kb: Phaser.Keyboard;\n    game: Phaser.Game;\n    keyCodeMoveUp: number;\n    keyCodeMoveDown: number;\n    keyCodeMoveLeft: number;\n    keyCodeMoveRight: number;\n    keyCodeHammerTime: number;\n    keyCodeShoot: number;\n    keyCodeDash: number;\n    moveXAxis: number;\n    moveYAxis: number;\n\n    constructor(game: Phaser.Game) {\n        super();\n        this.game = game;\n        game.input.gamepad.start();\n        this.setupKeyboardLayout();\n    }\n\n    setupKeyboardLayout() {\n        this.kb = this.game.input.keyboard;\n        let layout = localStorage.getItem('keyboard.layout');\n        if (null == layout || layout == 'azerty') {\n            this.useAzertyLayout();\n        } else if (layout == 'qwerty') {\n            this.useQwertyLayout();\n        } else if (layout == 'other') {\n            this.useOtherKeyboardLayout();\n        } else if (layout == 'custom') {\n            this.useCustomKeyboardLayout();\n        }\n    }\n\n    useAzertyLayout() {\n        this.keyCodeMoveUp = Phaser.KeyCode.Z;\n        this.keyCodeMoveDown = Phaser.KeyCode.S;\n        this.keyCodeMoveLeft = Phaser.KeyCode.Q;\n        this.keyCodeMoveRight = Phaser.KeyCode.D;\n        this.keyCodeHammerTime = Phaser.KeyCode.H;\n        this.keyCodeShoot = Phaser.KeyCode.J;\n        this.keyCodeDash = Phaser.KeyCode.K;\n        localStorage.setItem('keyboard.layout', 'azerty');\n    }\n\n    useQwertyLayout() {\n        this.keyCodeMoveUp = Phaser.KeyCode.W;\n        this.keyCodeMoveDown = Phaser.KeyCode.S;\n        this.keyCodeMoveLeft = Phaser.KeyCode.A;\n        this.keyCodeMoveRight = Phaser.KeyCode.D;\n        this.keyCodeHammerTime = Phaser.KeyCode.H;\n        this.keyCodeShoot = Phaser.KeyCode.J;\n        this.keyCodeDash = Phaser.KeyCode.K;\n        localStorage.setItem('keyboard.layout', 'qwerty');\n    }\n\n    useOtherKeyboardLayout() {\n        this.keyCodeMoveUp = Phaser.KeyCode.UP;\n        this.keyCodeMoveDown = Phaser.KeyCode.DOWN;\n        this.keyCodeMoveLeft = Phaser.KeyCode.LEFT;\n        this.keyCodeMoveRight = Phaser.KeyCode.RIGHT;\n        this.keyCodeHammerTime = Phaser.KeyCode.ALT;\n        this.keyCodeShoot = Phaser.KeyCode.SPACEBAR;\n        this.keyCodeDash = Phaser.KeyCode.CONTROL;\n        localStorage.setItem('keyboard.layout', 'other');\n    }\n\n    useCustomKeyboardLayout() {\n        this.keyCodeMoveUp = this.readNumberFromLocalStorage('keyboard.layout.custom.moveUp', Phaser.KeyCode.UP);\n        this.keyCodeMoveDown = this.readNumberFromLocalStorage('keyboard.layout.custom.moveDown', Phaser.KeyCode.DOWN);\n        this.keyCodeMoveLeft = this.readNumberFromLocalStorage('keyboard.layout.custom.moveLeft', Phaser.KeyCode.LEFT);\n        this.keyCodeMoveRight = this.readNumberFromLocalStorage('keyboard.layout.custom.moveRight', Phaser.KeyCode.RIGHT);\n        this.keyCodeShoot = this.readNumberFromLocalStorage('keyboard.layout.custom.shoot', Phaser.KeyCode.SPACEBAR);\n        this.keyCodeHammerTime = this.readNumberFromLocalStorage('keyboard.layout.custom.hammer', Phaser.KeyCode.ALT);\n        this.keyCodeDash = this.readNumberFromLocalStorage('keyboard.layout.custom.dash', Phaser.KeyCode.CONTROL);\n        localStorage.setItem('keyboard.layout', 'custom');\n    }\n\n    shootingAngle(playerPos: Phaser.Point): number {\n        if (this.kb && this.kb.isDown(this.keyCodeShoot)) {\n            return this.lookingAngle();\n        }\n    }\n\n    dashingAngle(playerPos: Phaser.Point): number {\n        if (this.kb && this.kb.isDown(this.keyCodeDash)) {\n            return this.lookingAngle();\n        }\n    }\n\n    lookingAngle(): number {\n        let dx = 0;\n        if (this.kb.isDown(this.keyCodeMoveLeft)) {\n            dx = -1;\n        } else if (this.kb.isDown(this.keyCodeMoveRight)) {\n            dx = 1;\n        }\n        let dy = 0;\n        if (this.kb.isDown(this.keyCodeMoveUp)) {\n            dy = -1;\n        } else if (this.kb.isDown(this.keyCodeMoveDown)) {\n            dy = 1;\n        }\n        if (dx != 0 || dy != 0) {\n            return Phaser.Math.angleBetween(0, 0, dx, dy);\n        } else {\n            return null;\n        }\n    }\n    isGoingUp(): boolean {\n        return this.kb && this.kb.isDown(this.keyCodeMoveUp);\n    }\n    isGoingDown(): boolean {\n        return this.kb && this.kb.isDown(this.keyCodeMoveDown);\n    }\n\n    isGoingLeft(): boolean {\n        return this.kb && this.kb.isDown(this.keyCodeMoveLeft);\n    }\n\n    isGoingRight(): boolean {\n        return this.kb && this.kb.isDown(this.keyCodeMoveRight);\n    }\n\n    isHammerTime(): boolean {\n        return this.kb && this.kb.isDown(this.keyCodeHammerTime);\n    }\n\n}\n\nexport class PadControls extends AbstractControls {\n    pad: Phaser.SinglePad;\n    game: Phaser.Game;\n    moveXAxis: number;\n    moveYAxis: number;\n    shootButton: number;\n    dashButton: number;\n    hammerTimeButton: number;\n\n    constructor(game: Phaser.Game, padIndex: number) {\n        super();\n        this.game = game;\n        game.input.gamepad.start();\n        this.setupGamepadLayout(padIndex);\n    }\n\n    private setupGamepadLayout(padIndex: number) {\n        let layout = localStorage.getItem('gamepad' + padIndex + '.layout');\n        if (null == layout || layout == 'xbox') {\n            this.useXboxLayout(padIndex);\n        } else if (layout == 'custom') {\n            this.useCustomGamepadLayout(padIndex);\n        }\n    }\n\n    useXboxLayout(padIndex: number) {\n        padIndex = padIndex || 1;\n        this.pad = this.game.input.gamepad['pad' + padIndex];\n        this.moveXAxis = Phaser.Gamepad.XBOX360_STICK_LEFT_X;\n        this.moveYAxis = Phaser.Gamepad.XBOX360_STICK_LEFT_Y;\n        this.shootButton = Phaser.Gamepad.XBOX360_A;\n        this.dashButton = Phaser.Gamepad.XBOX360_X;\n        this.hammerTimeButton = Phaser.Gamepad.XBOX360_B;\n        localStorage.setItem('gamepad' + padIndex + '.layout', 'xbox');\n    }\n\n    useCustomGamepadLayout(padIndex: number) {\n        padIndex = padIndex || 1;\n        this.pad = this.game.input.gamepad['pad' + padIndex];\n        this.moveXAxis = this.readNumberFromLocalStorage('gamepad' + padIndex + '.layout.custom.moveXAxis', Phaser.Gamepad.XBOX360_STICK_LEFT_X);\n        this.moveYAxis = this.readNumberFromLocalStorage('gamepad' + padIndex + '.layout.custom.moveYAxis', Phaser.Gamepad.XBOX360_STICK_LEFT_Y);\n        this.shootButton = this.readNumberFromLocalStorage('gamepad' + padIndex + '.layout.custom.shootButton', Phaser.Gamepad.XBOX360_A);\n        this.dashButton = this.readNumberFromLocalStorage('gamepad' + padIndex + '.layout.custom.dashButton', Phaser.Gamepad.XBOX360_X);\n        this.hammerTimeButton = this.readNumberFromLocalStorage('gamepad' + padIndex + '.layout.custom.hammerTimeButton', Phaser.Gamepad.XBOX360_B);\n        localStorage.setItem('gamepad' + padIndex + '.layout', 'custom');\n    }\n\n    shootingAngle(playerPos: Phaser.Point): number {\n        if (this.pad && this.pad.isDown(this.shootButton)) {\n            return this.lookingAngle();\n        }\n    }\n\n    dashingAngle(playerPos: Phaser.Point): number {\n        if (this.pad && this.pad.isDown(this.dashButton)) {\n            return this.lookingAngle();\n        }\n    }\n\n    lookingAngle(): number {\n        let dx = this.pad.axis(this.moveXAxis);\n        let dy = this.pad.axis(this.moveYAxis);\n        dx = Math.abs(dx) <= this.pad.deadZone ? 0 : dx;\n        dy = Math.abs(dy) <= this.pad.deadZone ? 0 : dy;\n        if (dx != 0 || dy != 0) {\n            return Phaser.Math.angleBetween(0, 0, dx, dy);\n        } else {\n            return null;\n        }\n    }\n    isGoingUp(): boolean {\n        return this.pad && this.pad.axis(this.moveYAxis) < -this.pad.deadZone\n            ;\n    }\n    isGoingDown(): boolean {\n        return this.pad && this.pad.axis(this.moveYAxis) > this.pad.deadZone\n            ;\n    }\n\n    isGoingLeft(): boolean {\n        return this.pad && this.pad.axis(this.moveXAxis) < -this.pad.deadZone;\n    }\n\n    isGoingRight(): boolean {\n        return this.pad && this.pad.axis(this.moveXAxis) > this.pad.deadZone;\n    }\n\n    isHammerTime(): boolean {\n        return this.pad && this.pad.isDown(this.hammerTimeButton);\n    }\n\n}"]}